<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="zh" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="UCB CS61A学习笔记" />
<meta name="author" content="lamaper" />
<meta property="og:locale" content="zh" />
<meta name="description" content="学习计算机程序的构造与解释" />
<meta property="og:description" content="学习计算机程序的构造与解释" />
<link rel="canonical" href="/posts/CS61A/" />
<meta property="og:url" content="/posts/CS61A/" />
<meta property="og:site_name" content="lamaper" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-06-30T18:45:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="UCB CS61A学习笔记" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"lamaper","url":"https://github.com/lamaper/"},"dateModified":"2025-10-31T00:25:50+08:00","datePublished":"2025-06-30T18:45:00+08:00","description":"学习计算机程序的构造与解释","headline":"UCB CS61A学习笔记","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/CS61A/"},"url":"/posts/CS61A/"}</script>
<!-- End Jekyll SEO tag -->


  <title>UCB CS61A学习笔记 | lamaper
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="icon" type="image/png" href="/assets/img/favicons/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/svg+xml" href="/assets/img/favicons/favicon.svg">
<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">



  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.36.4/dist/tocbot.min.css">
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- Scripts -->

  <script src="/assets/js/dist/theme.min.js"></script>

  <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.18/dayjs.min.js,npm/dayjs@1.11.18/locale/en.js,npm/dayjs@1.11.18/plugin/relativeTime.js,npm/dayjs@1.11.18/plugin/localizedFormat.js,npm/tocbot@4.36.4/dist/tocbot.min.js,npm/mermaid@11.12.0/dist/mermaid.min.js"></script>







<script defer src="/assets/js/dist/post.min.js"></script>


  <!-- MathJax -->
  <script src="/assets/js/data/mathjax.js"></script>
  <script async src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-chtml.js"></script>


<!-- Pageviews -->

  

  



  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"><img src="https://avatars.githubusercontent.com/u/108182318?v=4" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a>

    <a class="site-title d-block" href="/">lamaper</a>
    <p class="site-subtitle fst-italic mb-0">Web / CTF / Coding</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    

      
        <a
          href="https://github.com/lamaper"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    

      
        <a
          href="javascript:location.href = 'mailto:' + ['lamaper','qq.com'].join('@')"
          aria-label="email"
          

          

          

          
        >
          <i class="fas fa-envelope"></i>
        </a>
      
    
          
        

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
        
          
            
              <span>UCB CS61A学习笔记</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Post
    </div>

    <button type="button" id="search-trigger" class="btn btn-link" aria-label="Search">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->





<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  




<!-- return -->










<article class="px-1" data-toc="true">
  <header>
    <h1 data-toc-skip>UCB CS61A学习笔记</h1>
    
      <p class="post-desc fw-light mb-4">学习计算机程序的构造与解释</p>
    

    <div class="post-meta text-muted">
      <!-- published date -->
      <span>
        Posted
        <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1751280300"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Jun 30, 2025
</time>

      </span>

      <!-- lastmod date -->
      
        <span>
          Updated
          <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1761841550"
  data-df="ll"
  
    data-bs-toggle="tooltip" data-bs-placement="bottom"
  
>
  Oct 31, 2025
</time>

        </span>
      

      

      <div class="d-flex justify-content-between">
        <!-- author(s) -->
        <span>
          

          By

          <em>
            
              
                <a href="https://github.com/lamaper/">lamaper</a>
                
              
            
          </em>
        </span>

        <div>
          <!-- pageviews -->
          

          <!-- read time -->
          <!-- Calculate the post's reading time, and display the word count in tooltip -->



<!-- words per minute -->










<!-- return element -->
<span
  class="readtime"
  data-bs-toggle="tooltip"
  data-bs-placement="bottom"
  title="12931 words"
>
  <em>71 min</em> read</span>

        </div>
      </div>
    </div>
  </header>

  
    <div id="toc-bar" class="d-flex align-items-center justify-content-between invisible">
      <span class="label text-truncate">UCB CS61A学习笔记</span>
      <button type="button" class="toc-trigger btn me-1">
        <i class="fa-solid fa-list-ul fa-fw"></i>
      </button>
    </div>

    <button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm">
      <span class="label ps-2 pe-1">Contents</span>
      <i class="fa-solid fa-angle-right fa-fw"></i>
    </button>

    <dialog id="toc-popup" class="p-0">
      <div class="header d-flex flex-row align-items-center justify-content-between">
        <div class="label text-truncate py-2 ms-4">UCB CS61A学习笔记</div>
        <button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75">
          <i class="fas fa-close"></i>
        </button>
      </div>
      <div id="toc-popup-content" class="px-4 py-3 pb-4"></div>
    </dialog>
  

  <div class="content">
    <h1 id="cs61a学习笔记">CS61A学习笔记</h1>

<h2 id="写在前面"><span class="me-2">写在前面</span><a href="#写在前面" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>CS61A的全称是Structure and Interpretation of Computer Programs（计算机程序的构造和解释），以Python语言授课。其课程内容主要是以Python为例，介绍程序设计中的各种方法，从控制语句到基础算法再到宏等。</p>

<p>单从课程目录来看，这门课与BIT开设的《C语言程序设计》有很多相似之处，虽然语言不同，但是思想却一致，所以学习CS61A并不需要按部就班的听每一节课，选择性地跳过已经学过的内容是高效的做法。</p>

<p>课程教材开源，可以直接阅读：<a href="https://www.composingprograms.com/">Composing Programs</a></p>

<p>对于我个人来说，长期受C/C++、Java等强类型语言影响，很不适应Python的各种语法，学习本科目侧重于了解Python语言和编程思路，因而笔记也有不同的侧重点。</p>

<h1 id="part1-python">Part1 Python</h1>

<h2 id="lecture-1-welcome"><span class="me-2">Lecture 1 Welcome</span><a href="#lecture-1-welcome" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>主要是引入，强调了“表达式”概念</p>

<h2 id="lecture-2-functions"><span class="me-2">Lecture 2 Functions</span><a href="#lecture-2-functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="变量与赋值"><span class="me-2">变量与赋值</span><a href="#变量与赋值" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>一个很神奇的Python变量赋值方式</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">f</span> <span class="o">=</span> <span class="nb">max</span> <span class="c1">#max is a function
</span></pre></td></tr></tbody></table></code></div></div>

<p>之后可以通过<code class="language-plaintext highlighter-rouge">f</code>来使用<code class="language-plaintext highlighter-rouge">max</code></p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nf">f</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span> <span class="c1">#30,相当于max(10,20,30)
</span></pre></td></tr></tbody></table></code></div></div>

<p>个人认为这里相当于函数指针传递：</p>

<pre><code class="language-C">int max(int a,int b,int c);
int (*f)(int,int,int) = &amp;max;
</code></pre>

<h3 id="python的特殊语法"><span class="me-2">Python的特殊语法</span><a href="#python的特殊语法" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>显然相对于C语言，Python在变量上更加灵活。</p>

<p>需要注意的是在如下Python语句中：</p>

<pre><code class="language-·python">a = 1
b = 2
a, b = a+b, a
</code></pre>

<p><code class="language-plaintext highlighter-rouge">a</code> 最终为3，<code class="language-plaintext highlighter-rouge">b</code>最终为1，这里逗号表达式是同时进行赋值操作，所以不能理解为：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="函数的返回值"><span class="me-2">函数的返回值</span><a href="#函数的返回值" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>C 语言借助<code class="language-plaintext highlighter-rouge">void</code>类型来显式表明函数无返回值，并且禁止把这类函数的调用结果用于赋值操作。而 Python 采用动态类型系统，不管函数是否有返回值都能进行赋值，没有返回值时就返回<code class="language-plaintext highlighter-rouge">None</code>。这体现了静态类型语言（C 语言）和动态类型语言（Python）在设计理念上的差异。</p>

<p>例如在一个C语言例子中：</p>

<pre><code class="language-C">#include &lt;stdio.h&gt;

void test(int a){
	int b = a;
	return;
}

int main(){
   	int b = test(2);
	printf("%d",b);
	return 0;
}
</code></pre>

<p>尝试编译运行会得到如下报错：</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>main.c: In function ‘main’:
main.c:12:13: error: void value not ignored as it ought to be
   12 |     int b = test(2);
      |             ^~~~
</pre></td></tr></tbody></table></code></div></div>

<p>意味着编译器禁止了接收<code class="language-plaintext highlighter-rouge">void</code>类型函数返回值的行为。</p>

<p>而在python中，对于：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nf">print</span><span class="p">(</span><span class="nf">print</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="nf">print</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</pre></td></tr></tbody></table></code></div></div>

<p>会有如下结果：</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>1
2
None None
</pre></td></tr></tbody></table></code></div></div>

<p>也就是说，Python的任意函数都有返回值，在没有显式写明返回值时，返回<code class="language-plaintext highlighter-rouge">None</code>。</p>

<p>需要注意的是<code class="language-plaintext highlighter-rouge">None</code>并不等同与<code class="language-plaintext highlighter-rouge">NULL</code>，<code class="language-plaintext highlighter-rouge">None</code>表示 “存在但无值”，可以参与逻辑判断如：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="c1">#使用is进行身份判断
</span></pre></td></tr></tbody></table></code></div></div>

<p>而<code class="language-plaintext highlighter-rouge">NULL</code>通常表示 “无效引用” 或 “未初始化”（如空指针、空引用），涉及内存/地址。</p>

<h2 id="lecture-3-control"><span class="me-2">Lecture 3 Control</span><a href="#lecture-3-control" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>讲了一些Python的基本语法与解释器运行法则及其部分用法。</p>

<p>在Python中布尔值为False的有：<code class="language-plaintext highlighter-rouge">False</code>，<code class="language-plaintext highlighter-rouge">0</code>，<code class="language-plaintext highlighter-rouge">''</code>，<code class="language-plaintext highlighter-rouge">None</code>，其余为True。</p>

<p>Python中没有传统意义的<code class="language-plaintext highlighter-rouge">for</code>循环。</p>

<h2 id="lab-00-getting-started"><span class="me-2"><a href="https://cs61a.org/lab/lab00/">Lab 00: Getting Started</a></span><a href="#lab-00-getting-started" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>教你如何本地测评与上传代码，由于咱不是UCB的学生，所以也没有办法上传代码，这段跳过。</p>

<h2 id="hw-01-functions-control-higher-order-functions"><span class="me-2"><a href="https://cs61a.org/hw/hw01/">HW 01: Functions, Control, Higher-Order Functions</a></span><a href="#hw-01-functions-control-higher-order-functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
</pre></td><td class="rouge-code"><pre><span class="kn">from</span> <span class="n">operator</span> <span class="kn">import</span> <span class="n">add</span><span class="p">,</span> <span class="n">mul</span>

<span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>

<span class="k">def</span> <span class="nf">identity</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span>

<span class="k">def</span> <span class="nf">triple</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">x</span>

<span class="k">def</span> <span class="nf">increment</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span>


<span class="kn">from</span> <span class="n">operator</span> <span class="kn">import</span> <span class="n">add</span><span class="p">,</span> <span class="n">sub</span>

<span class="k">def</span> <span class="nf">a_plus_abs_b</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return a+abs(b), but without calling abs.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="nf">a_plus_abs_b</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="mi">5</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">a_plus_abs_b</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">)</span>
    <span class="mi">5</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">a_plus_abs_b</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="mi">3</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">a_plus_abs_b</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">)</span>
    <span class="mi">3</span>
    <span class="sh">"""</span>
    <span class="k">if</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">sub</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">add</span>
    <span class="k">return</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">a_plus_abs_b_syntax_check</span><span class="p">():</span>
    <span class="sh">"""</span><span class="s">Check that you didn</span><span class="sh">'</span><span class="s">t change the return statement of a_plus_abs_b.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="c1"># You aren't expected to understand the code of this test.
</span>    <span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="n">inspect</span><span class="p">,</span> <span class="n">re</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">re</span><span class="p">.</span><span class="nf">findall</span><span class="p">(</span><span class="sa">r</span><span class="sh">'</span><span class="s">^\s*(return .*)</span><span class="sh">'</span><span class="p">,</span> <span class="n">inspect</span><span class="p">.</span><span class="nf">getsource</span><span class="p">(</span><span class="n">a_plus_abs_b</span><span class="p">),</span> <span class="n">re</span><span class="p">.</span><span class="n">M</span><span class="p">)</span>
    <span class="p">[</span><span class="sh">'</span><span class="s">return f(a, b)</span><span class="sh">'</span><span class="p">]</span>
    <span class="sh">"""</span>
    <span class="c1"># You don't need to edit this function. It's just here to check your work.
</span>

<span class="k">def</span> <span class="nf">hailstone</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Print the hailstone sequence starting at n and return its
    length.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="nf">hailstone</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="mi">10</span>
    <span class="mi">5</span>
    <span class="mi">16</span>
    <span class="mi">8</span>
    <span class="mi">4</span>
    <span class="mi">2</span>
    <span class="mi">1</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
    <span class="mi">7</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="nf">hailstone</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="mi">1</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
    <span class="mi">1</span>
    <span class="sh">"""</span>
    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="nf">hailstone</span><span class="p">(</span><span class="n">n</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nf">hailstone</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>


<span class="k">def</span> <span class="nf">product</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">term</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return the product of the first n terms in a sequence.

    n: a positive integer
    term: a function that takes an index as input and produces a term
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="nf">product</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">identity</span><span class="p">)</span>  <span class="c1"># 1 * 2 * 3
</span>    <span class="mi">6</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">product</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">identity</span><span class="p">)</span>  <span class="c1"># 1 * 2 * 3 * 4 * 5
</span>    <span class="mi">120</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">product</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">square</span><span class="p">)</span>    <span class="c1"># 1^2 * 2^2 * 3^2
</span>    <span class="mi">36</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">product</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">square</span><span class="p">)</span>    <span class="c1"># 1^2 * 2^2 * 3^2 * 4^2 * 5^2
</span>    <span class="mi">14400</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">product</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">increment</span><span class="p">)</span> <span class="c1"># (1+1) * (2+1) * (3+1)
</span>    <span class="mi">24</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">product</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">triple</span><span class="p">)</span>    <span class="c1"># 1*3 * 2*3 * 3*3
</span>    <span class="mi">162</span>
    <span class="sh">"""</span>
    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="nf">term</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nf">term</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">*</span> <span class="nf">product</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">term</span><span class="p">)</span>



<span class="k">def</span> <span class="nf">make_repeater</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Returns the function that computes the nth application of f.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="n">add_three</span> <span class="o">=</span> <span class="nf">make_repeater</span><span class="p">(</span><span class="n">increment</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">add_three</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="mi">8</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">make_repeater</span><span class="p">(</span><span class="n">triple</span><span class="p">,</span> <span class="mi">5</span><span class="p">)(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># 3 * (3 * (3 * (3 * (3 * 1))))
</span>    <span class="mi">243</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">make_repeater</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="mi">2</span><span class="p">)(</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># square(square(5))
</span>    <span class="mi">625</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">make_repeater</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="mi">3</span><span class="p">)(</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># square(square(square(5)))
</span>    <span class="mi">390625</span>
    <span class="sh">"""</span>
    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="k">def</span> <span class="nf">repeater</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">x</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nf">make_repeater</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)(</span><span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">repeater</span>

</pre></td></tr></tbody></table></code></div></div>

<h2 id="lecture-4-higher-order-functions"><span class="me-2">Lecture 4 Higher-Order Functions</span><a href="#lecture-4-higher-order-functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>先讲了一些优先运算行为，比如在python中，函数的参数在传入前要依次进行运算等。该例子老师讲的很到位，不再赘述。</p>

<p>紧接着是高阶函数。实际上可以理解为Python的形式参数可以接收函数名并在函数内部调用函数；此外，Python允许嵌套函数。</p>

<p>例如：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">apply_twice</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="nf">f</span><span class="p">(</span><span class="nf">f</span><span class="p">(</span><span class="n">X</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>

<span class="n">result</span> <span class="o">=</span> <span class="nf">apply_twice</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>此时相当于：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">result</span> <span class="o">=</span> <span class="nf">square</span><span class="p">(</span><span class="nf">square</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</pre></td></tr></tbody></table></code></div></div>

<p>在C语言中可以尝试理解为：</p>

<pre><code class="language-C">int apply_twice(int (*f)(int), int x){
    return f(f(x));
}

int square(int x){
    return x * x;
}

int main(){
    result = apply_twice(square, 2);
    return 0;
}
</code></pre>

<p>其中，函数指针在C语言的声明方式为<code class="language-plaintext highlighter-rouge">&lt;返回值类型&gt; (*指针名)(参数列表)</code></p>

<h2 id="lecture-5-environments"><span class="me-2">Lecture 5 Environments</span><a href="#lecture-5-environments" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="python的闭包"><span class="me-2">Python的闭包</span><a href="#python的闭包" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>给到一个例子：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">make_adder</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">adder</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">n</span> <span class="o">+</span> <span class="n">k</span>
    <span class="k">return</span> <span class="n">adder</span>

<span class="n">add_three</span> <span class="o">=</span> <span class="nf">make_adder</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="nf">add_three</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>这段 Python 代码展示了闭包（Closure）的概念，即在函数内部定义的子函数可以捕获并记住<strong>外部函数</strong>的局部变量（本例子中为<code class="language-plaintext highlighter-rouge">n</code>），在C++11中引入的lambda表达式与Python的闭包极为相似，若用C++转写这段代码，可以写为：</p>

<div class="language-c++ highlighter-rouge"><div class="code-header">
        <span data-label-text="C++"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="k">auto</span> <span class="nf">make_adder</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">){</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">n</span><span class="p">](</span><span class="kt">int</span> <span class="n">k</span><span class="p">){</span>
        <span class="k">return</span> <span class="n">n</span> <span class="o">+</span> <span class="n">k</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="k">auto</span> <span class="n">add_three</span> <span class="o">=</span> <span class="n">make_adder</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">add_three</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>C++ 中的 lambda 表达式是 C++11 引入的一项重要特性，它允许你在代码中<strong>内联定义匿名函数对象</strong>，从而方便地实现闭包功能，其格式为<code class="language-plaintext highlighter-rouge">[capture list](parameter list) -&gt; return type { function body }</code></p>

<p>capture list为捕获列表，意味lambda表达式可从外界获取的参数，可以为引用，也可以为值；</p>

<p>parameter list为形式参数列表；</p>

<p>-&gt; return type 为返回值类型，可以省略，由auto自动推断；</p>

<div class="language-c++ highlighter-rouge"><div class="code-header">
        <span data-label-text="C++"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="k">auto</span> <span class="n">func</span> <span class="o">=</span> <span class="p">[](</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span> <span class="p">};</span>
<span class="c1">// 等价于以下类的实例：</span>
<span class="k">struct</span> <span class="nc">__lambda</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="k">operator</span><span class="p">()(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span> <span class="p">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>
<span class="k">auto</span> <span class="n">func</span> <span class="o">=</span> <span class="n">__lambda</span><span class="p">{};</span>
</pre></td></tr></tbody></table></code></div></div>

<p>回到Python的例子，<code class="language-plaintext highlighter-rouge">return adder</code>相当于返回一个函数指针，如此便可以理解。</p>

<p>对于Python，它也有lambda表达式，形式较为简单：<code class="language-plaintext highlighter-rouge">lambda &lt;参数列表&gt;: &lt;表达式&gt;</code>，自动返回表达式的值，为匿名函数。需要注意的是，Python的lambda表达式没有C++的强大，仅能完成一些简单的表达式计算。</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="n">add</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>  <span class="c1"># 等价于 def add(a, b): return a + b
</span><span class="nf">print</span><span class="p">(</span><span class="nf">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>  <span class="c1"># 输出：7
</span></pre></td></tr></tbody></table></code></div></div>

<h2 id="lab-01-functions-control"><span class="me-2"><a href="https://cs61a.org/lab/lab01/">Lab 01: Functions, Control</a></span><a href="#lab-01-functions-control" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>前两个讨论题主要是关于Python的Shell，print可以打印字符，直接运行函数也可以显示其返回值，这里不再赘述。</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">falling</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Compute the falling factorial of n to depth k.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="nf">falling</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># 6 * 5 * 4
</span>    <span class="mi">120</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">falling</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># 4 * 3 * 2
</span>    <span class="mi">24</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">falling</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># 4
</span>    <span class="mi">4</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">falling</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="mi">1</span>
    <span class="sh">"""</span>
    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="n">ans</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="n">k</span><span class="p">,</span> <span class="n">n</span>
    <span class="nf">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">ans</span> <span class="o">*=</span> <span class="n">j</span>
        <span class="n">j</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="n">i</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">ans</span>


<span class="k">def</span> <span class="nf">divisible_by_k</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">
</span><span class="gp">    &gt;&gt;&gt;</span> <span class="n">a</span> <span class="o">=</span> <span class="nf">divisible_by_k</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># 2, 4, 6, 8, and 10 are divisible by 2
</span>    <span class="mi">2</span>
    <span class="mi">4</span>
    <span class="mi">6</span>
    <span class="mi">8</span>
    <span class="mi">10</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">a</span>
    <span class="mi">5</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">b</span> <span class="o">=</span> <span class="nf">divisible_by_k</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># 1, 2, and 3 are divisible by 1
</span>    <span class="mi">1</span>
    <span class="mi">2</span>
    <span class="mi">3</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">b</span>
    <span class="mi">3</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="nf">divisible_by_k</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span>  <span class="c1"># There are no integers up to 6 that are divisible by 7
</span>    <span class="o">&gt;&gt;&gt;</span> <span class="n">c</span>
    <span class="mi">0</span>
    <span class="sh">"""</span>
    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="nf">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">count</span>


<span class="k">def</span> <span class="nf">double_eights</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return true if n has two eights in a row.
</span><span class="gp">    &gt;&gt;&gt;</span> <span class="nf">double_eights</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
    <span class="bp">False</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">double_eights</span><span class="p">(</span><span class="mi">88</span><span class="p">)</span>
    <span class="bp">True</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">double_eights</span><span class="p">(</span><span class="mi">2882</span><span class="p">)</span>
    <span class="bp">True</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">double_eights</span><span class="p">(</span><span class="mi">880088</span><span class="p">)</span>
    <span class="bp">True</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">double_eights</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span>
    <span class="bp">False</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">double_eights</span><span class="p">(</span><span class="mi">80808080</span><span class="p">)</span>
    <span class="bp">False</span>
    <span class="sh">"""</span>
    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="nf">while</span><span class="p">(</span><span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">8</span> <span class="ow">and</span> <span class="p">(</span><span class="n">n</span> <span class="o">//</span> <span class="mi">10</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="n">n</span> <span class="o">//=</span> <span class="mi">10</span>
    <span class="k">return</span> <span class="bp">False</span>


<span class="k">def</span> <span class="nf">two_of_three</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return m*m + n*n, where m and n are the two smallest members of the
    positive numbers i, j, and k.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="nf">two_of_three</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="mi">5</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">two_of_three</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="mi">10</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">two_of_three</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
    <span class="mi">68</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">two_of_three</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
    <span class="mi">50</span>
    <span class="sh">"""</span>
    <span class="k">return</span> <span class="nf">min</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="nf">max</span><span class="p">(</span><span class="nf">min</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">),</span><span class="nf">min</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">),</span><span class="nf">min</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">k</span><span class="p">))</span> <span class="o">**</span> <span class="mi">2</span>

<span class="k">def</span> <span class="nf">two_of_three_syntax_check</span><span class="p">():</span>
    <span class="sh">"""</span><span class="s">Check that your two_of_three code consists of nothing but a return statement.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="c1"># You aren't expected to understand the code of this test.
</span>    <span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="n">inspect</span><span class="p">,</span> <span class="n">ast</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="nf">type</span><span class="p">(</span><span class="n">x</span><span class="p">).</span><span class="n">__name__</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ast</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">inspect</span><span class="p">.</span><span class="nf">getsource</span><span class="p">(</span><span class="n">two_of_three</span><span class="p">)).</span><span class="n">body</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">body</span><span class="p">]</span>
    <span class="p">[</span><span class="sh">'</span><span class="s">Expr</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Return</span><span class="sh">'</span><span class="p">]</span>
    <span class="sh">"""</span>
    <span class="c1"># You don't need to edit this function. It's just here to check your work.
</span>

<span class="k">def</span> <span class="nf">middle</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return the number among a, b, and c that is not the smallest or largest.
    Assume a, b, and c are all different numbers.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="nf">middle</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="mi">4</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">middle</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="mi">5</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">middle</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
    <span class="mi">5</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">middle</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
    <span class="mi">5</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">middle</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
    <span class="mi">30</span>
    <span class="sh">"""</span>
    <span class="k">return</span> <span class="nf">max</span><span class="p">(</span><span class="nf">min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">),</span><span class="nf">min</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">),</span><span class="nf">min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">largest_factor</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return the largest factor of n that is smaller than n.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="nf">largest_factor</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="c1"># factors are 1, 3, 5
</span>    <span class="mi">5</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">largest_factor</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span> <span class="c1"># factors are 1, 2, 4, 5, 8, 10, 16, 20, 40
</span>    <span class="mi">40</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">largest_factor</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span> <span class="c1"># factors are 1, 13
</span>    <span class="mi">1</span>
    <span class="sh">"""</span>
    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">i</span>
    <span class="k">return</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">multiple</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return the smallest number n that is a multiple of both a and b.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="nf">multiple</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="mi">12</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">multiple</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">21</span><span class="p">)</span>
    <span class="mi">42</span>
    <span class="sh">"""</span>
    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="k">def</span> <span class="nf">gcd</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">while</span> <span class="n">y</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">%</span> <span class="n">y</span>
        <span class="k">return</span> <span class="n">x</span>
    <span class="k">def</span> <span class="nf">lcm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="nf">return </span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span> <span class="o">//</span> <span class="nf">gcd</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="nf">lcm</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="lecture-6-sound-optional"><span class="me-2">Lecture 6 Sound (Optional)</span><a href="#lecture-6-sound-optional" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>选修课，用python制作wav音频</p>

<h2 id="project-01-the-game-of-hog"><span class="me-2"><a href="https://www.learncs.site/docs/curriculum-resource/cs61a/cs61a_zh/project/hog">Project 01: The Game of Hog</a></span><a href="#project-01-the-game-of-hog" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<blockquote>
  <h3 id="规则"><span class="me-2">规则</span><a href="#规则" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

  <p>在 Hog 游戏中，两名玩家轮流尝试成为第一个以至少 <code class="language-plaintext highlighter-rouge">GOAL</code> 总分结束回合的人，其中 <code class="language-plaintext highlighter-rouge">GOAL</code> 默认为 100。在每个回合中，当前玩家选择掷出一些骰子，最多 10 个。该玩家该回合的分数是骰子结果的总和。但是，掷出太多骰子的玩家会面临以下风险：</p>

  <ul>
    <li><strong>逢一判负</strong>：如果掷出的骰子中任何一个为 1，则当前玩家该回合得分为 1。(英文名：Sow Sad)</li>
    <li><em>示例 1：</em> 当前玩家掷出 7 个骰子，其中 5 个骰子的结果为 1。他们该回合得 <code class="language-plaintext highlighter-rouge">1</code> 分。</li>
    <li><em>示例 2：</em> 当前玩家掷出 4 个骰子，所有骰子的结果均为 3。由于未发生逢一判负，他们该回合得 <code class="language-plaintext highlighter-rouge">12</code> 分。</li>
  </ul>

  <p>在正常的 Hog 游戏中，这些就是所有的规则。为了给游戏增添趣味，我们将加入一些特殊规则：</p>

  <ul>
    <li><strong>野猪乱斗</strong>：当玩家掷出零个骰子时，其得分为对手分数十位与自身分数个位之差的绝对值的三倍，或者 1 分，取两者中的较大值。(英文名：Boar Brawl) 个位数为最右边的数字，十位数为倒数第二位数字。如果玩家的分数是个位数（小于 10），则该玩家分数的十位数为 0。</li>
    <li><em>示例 1：</em>
      <ul>
        <li>当前玩家有 <code class="language-plaintext highlighter-rouge">21</code> 分，对手有 <code class="language-plaintext highlighter-rouge">46</code> 分，当前玩家选择不掷骰子。</li>
        <li>对手分数的十位数为 <code class="language-plaintext highlighter-rouge">4</code>，当前玩家分数的个位数为 <code class="language-plaintext highlighter-rouge">1</code>。</li>
        <li>因此，玩家获得 <code class="language-plaintext highlighter-rouge">3 * abs(4 - 1) = 9</code> 分。</li>
      </ul>
    </li>
    <li><em>示例 2：</em>
      <ul>
        <li>当前玩家有 <code class="language-plaintext highlighter-rouge">45</code> 分，对手有 <code class="language-plaintext highlighter-rouge">52</code> 分，当前玩家选择跳过掷骰子环节。</li>
        <li>对手分数的十位数为 <code class="language-plaintext highlighter-rouge">5</code>，当前玩家分数的个位数为 <code class="language-plaintext highlighter-rouge">5</code>。</li>
        <li>由于 <code class="language-plaintext highlighter-rouge">3 * abs(5 - 5) = 0</code>，因此玩家获得 <code class="language-plaintext highlighter-rouge">1</code> 分。</li>
      </ul>
    </li>
    <li><em>示例 3：</em>
      <ul>
        <li>当前玩家有 <code class="language-plaintext highlighter-rouge">2</code> 分，对手有 <code class="language-plaintext highlighter-rouge">5</code> 分，当前玩家选择掷出零个骰子。</li>
        <li>对手分数的十位数为 <code class="language-plaintext highlighter-rouge">0</code>，当前玩家分数的个位数为 <code class="language-plaintext highlighter-rouge">2</code>。</li>
        <li>因此，玩家获得 <code class="language-plaintext highlighter-rouge">3 * abs(0 - 2) = 6</code> 分。</li>
      </ul>
    </li>
    <li><strong>Sus Fuss</strong>。如果一个数字恰好有 3 个或 4 个因子（包括 1 和它本身），我们就称它为 <a href="https://en.wikipedia.org/wiki/Sus_(genus)"><em>sus</em></a>，即满足“可疑”条件的数字。如果在掷骰子后，当前玩家的分数是一个 sus 数字，那么他们的分数会直接提升至下一个质数。</li>
    <li><em>示例 1：</em>
      <ul>
        <li>玩家有 14 分，掷出 2 个骰子，总共得到 7 分。他们的新分数将是 21，新分数 21 包含四个因子：1、3、7 和 21。因为 21 是 sus，所以玩家的分数增加到 23，即下一个质数。</li>
      </ul>
    </li>
    <li><em>示例 2：</em>
      <ul>
        <li>玩家有 63 分，掷出 5 个骰子，总共得到 1 分。他们的新分数将是 64，它有 7 个因子：1、2、4、8、16、32 和 64。因为 64 不是 sus，所以玩家的分数保持不变。</li>
      </ul>
    </li>
    <li><em>示例 3：</em>
      <ul>
        <li>玩家有 49 分，掷出 5 个骰子，总共得到 18 分。他们的新分数将是 67，这是一个质数，有 2 个因子：1 和 67。因为 67 不是 sus，所以玩家的分数保持不变。</li>
      </ul>
    </li>
  </ul>
</blockquote>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
</pre></td><td class="rouge-code"><pre><span class="sh">"""</span><span class="s">The Game of Hog.</span><span class="sh">"""</span>
<span class="c1">#./hog.py
#author:lamaper
</span>
<span class="kn">from</span> <span class="n">dice</span> <span class="kn">import</span> <span class="n">six_sided</span><span class="p">,</span> <span class="n">make_test_dice</span>
<span class="kn">from</span> <span class="n">ucb</span> <span class="kn">import</span> <span class="n">main</span><span class="p">,</span> <span class="n">trace</span><span class="p">,</span> <span class="n">interact</span>

<span class="n">GOAL</span> <span class="o">=</span> <span class="mi">100</span>  <span class="c1"># The goal of Hog is to score 100 points.
</span>
<span class="c1">######################
# Phase 1: Simulator #
######################
</span>

<span class="k">def</span> <span class="nf">roll_dice</span><span class="p">(</span><span class="n">num_rolls</span><span class="p">,</span> <span class="n">dice</span><span class="o">=</span><span class="n">six_sided</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Simulate rolling the DICE exactly NUM_ROLLS &gt; 0 times. Return the sum of
    the outcomes unless any of the outcomes is 1. In that case, return 1.

    num_rolls:  The number of dice rolls that will be made.
    dice:       A function that simulates a single dice roll outcome. Defaults to the six sided dice.
    </span><span class="sh">"""</span>
    <span class="c1"># These assert statements ensure that num_rolls is a positive integer.
</span>    <span class="k">assert</span> <span class="nf">type</span><span class="p">(</span><span class="n">num_rolls</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">,</span> <span class="sh">"</span><span class="s">num_rolls must be an integer.</span><span class="sh">"</span>
    <span class="k">assert</span> <span class="n">num_rolls</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="sh">"</span><span class="s">Must roll at least once.</span><span class="sh">"</span>
    <span class="c1"># BEGIN PROBLEM 1
</span>    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="nf">while</span><span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_rolls</span><span class="p">):</span>
        <span class="n">roll</span> <span class="o">=</span> <span class="nf">dice</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">roll</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="n">total</span> <span class="o">+=</span> <span class="n">roll</span>
        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">total</span>
    <span class="c1"># END PROBLEM 1
</span>

<span class="k">def</span> <span class="nf">boar_brawl</span><span class="p">(</span><span class="n">player_score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return the points scored when the current player rolls 0 dice according to Boar Brawl.

    player_score:     The total score of the current player.
    opponent_score:   The total score of the other player.

    </span><span class="sh">"""</span>
    <span class="c1"># BEGIN PROBLEM 2
</span>    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">player_score</span> <span class="o">%</span> <span class="mi">10</span>
    <span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="n">opponent_score</span> <span class="o">//</span> <span class="mi">10</span><span class="p">)</span> <span class="o">%</span> <span class="mi">10</span>
    <span class="k">return</span> <span class="nf">max</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="nf">abs</span><span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
    <span class="c1"># END PROBLEM 2
</span>

<span class="k">def</span> <span class="nf">take_turn</span><span class="p">(</span><span class="n">num_rolls</span><span class="p">,</span> <span class="n">player_score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">,</span> <span class="n">dice</span><span class="o">=</span><span class="n">six_sided</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return the points scored on a turn rolling NUM_ROLLS dice when the
    current player has PLAYER_SCORE points and the opponent has OPPONENT_SCORE points.

    num_rolls:       The number of dice rolls that will be made.
    player_score:    The total score of the current player.
    opponent_score:  The total score of the other player.
    dice:            A function that simulates a single dice roll outcome.
    </span><span class="sh">"""</span>
    <span class="c1"># Leave these assert statements here; they help check for errors.
</span>    <span class="k">assert</span> <span class="nf">type</span><span class="p">(</span><span class="n">num_rolls</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">,</span> <span class="sh">"</span><span class="s">num_rolls must be an integer.</span><span class="sh">"</span>
    <span class="k">assert</span> <span class="n">num_rolls</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">,</span> <span class="sh">"</span><span class="s">Cannot roll a negative number of dice in take_turn.</span><span class="sh">"</span>
    <span class="k">assert</span> <span class="n">num_rolls</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">,</span> <span class="sh">"</span><span class="s">Cannot roll more than 10 dice.</span><span class="sh">"</span>
    <span class="c1"># BEGIN PROBLEM 3
</span>    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="k">if</span> <span class="n">num_rolls</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="nf">boar_brawl</span><span class="p">(</span><span class="n">player_score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nf">roll_dice</span><span class="p">(</span><span class="n">num_rolls</span><span class="p">,</span> <span class="n">dice</span><span class="p">)</span>
    <span class="c1"># END PROBLEM 3
</span>

<span class="k">def</span> <span class="nf">simple_update</span><span class="p">(</span><span class="n">num_rolls</span><span class="p">,</span> <span class="n">player_score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">,</span> <span class="n">dice</span><span class="o">=</span><span class="n">six_sided</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return the total score of a player who starts their turn with
    PLAYER_SCORE and then rolls NUM_ROLLS DICE, ignoring Sus Fuss.
    </span><span class="sh">"""</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">player_score</span> <span class="o">+</span> <span class="nf">take_turn</span><span class="p">(</span><span class="n">num_rolls</span><span class="p">,</span> <span class="n">player_score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">,</span> <span class="n">dice</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">score</span>


<span class="k">def</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return whether N is prime.</span><span class="sh">"""</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="n">k</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">k</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="n">k</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="bp">True</span>


<span class="k">def</span> <span class="nf">num_factors</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return the number of factors of N, including 1 and N itself.</span><span class="sh">"""</span>
    <span class="c1"># BEGIN PROBLEM 4
</span>    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">2</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">count</span>
    <span class="c1"># END PROBLEM 4
</span>

<span class="k">def</span> <span class="nf">sus_points</span><span class="p">(</span><span class="n">score</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return the new score of a player taking into account the Sus Fuss rule.</span><span class="sh">"""</span>
    <span class="c1"># BEGIN PROBLEM 4
</span>    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="n">sus</span> <span class="o">=</span> <span class="nf">num_factors</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sus</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">sus</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">score</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="nf">is_prime</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">i</span>
    <span class="k">else</span> <span class="p">:</span>
        <span class="k">return</span> <span class="n">score</span>
    <span class="c1"># END PROBLEM 4
</span>

<span class="k">def</span> <span class="nf">sus_update</span><span class="p">(</span><span class="n">num_rolls</span><span class="p">,</span> <span class="n">player_score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">,</span> <span class="n">dice</span><span class="o">=</span><span class="n">six_sided</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return the total score of a player who starts their turn with
    PLAYER_SCORE and then rolls NUM_ROLLS DICE, *including* Sus Fuss.
    </span><span class="sh">"""</span>
    <span class="c1"># BEGIN PROBLEM 4
</span>    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="n">score</span> <span class="o">=</span> <span class="nf">take_turn</span><span class="p">(</span><span class="n">num_rolls</span><span class="p">,</span> <span class="n">player_score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">,</span> <span class="n">dice</span><span class="p">)</span>
    <span class="k">return</span> <span class="nf">sus_points</span><span class="p">(</span><span class="n">player_score</span> <span class="o">+</span> <span class="n">score</span><span class="p">)</span>
    <span class="c1"># END PROBLEM 4
</span>

<span class="k">def</span> <span class="nf">always_roll_5</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">A strategy of always rolling 5 dice, regardless of the player</span><span class="sh">'</span><span class="s">s score or
    the opponent</span><span class="sh">'</span><span class="s">s score.
    </span><span class="sh">"""</span>
    <span class="k">return</span> <span class="mi">5</span>


<span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">strategy0</span><span class="p">,</span> <span class="n">strategy1</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">score0</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">score1</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">dice</span><span class="o">=</span><span class="n">six_sided</span><span class="p">,</span> <span class="n">goal</span><span class="o">=</span><span class="n">GOAL</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Simulate a game and return the final scores of both players, with
    Player 0</span><span class="sh">'</span><span class="s">s score first and Player 1</span><span class="sh">'</span><span class="s">s score second.

    E.g., play(always_roll_5, always_roll_5, sus_update) simulates a game in
    which both players always choose to roll 5 dice on every turn and the Sus
    Fuss rule is in effect.

    A strategy function, such as always_roll_5, takes the current player</span><span class="sh">'</span><span class="s">s
    score and their opponent</span><span class="sh">'</span><span class="s">s score and returns the number of dice the current
    player chooses to roll.

    An update function, such as sus_update or simple_update, takes the number
    of dice to roll, the current player</span><span class="sh">'</span><span class="s">s score, the opponent</span><span class="sh">'</span><span class="s">s score, and the
    dice function used to simulate rolling dice. It returns the updated score
    of the current player after they take their turn.

    strategy0: The strategy for player0.
    strategy1: The strategy for player1.
    update:    The update function (used for both players).
    score0:    Starting score for Player 0
    score1:    Starting score for Player 1
    dice:      A function of zero arguments that simulates a dice roll.
    goal:      The game ends and someone wins when this score is reached.
    </span><span class="sh">"""</span>
    <span class="n">who</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Who is about to take a turn, 0 (first) or 1 (second)
</span>    <span class="c1"># BEGIN PROBLEM 5
</span>    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="k">while</span> <span class="n">score0</span> <span class="o">&lt;</span> <span class="n">goal</span> <span class="ow">and</span> <span class="n">score1</span> <span class="o">&lt;</span> <span class="n">goal</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">who</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">num_rolls</span> <span class="o">=</span> <span class="nf">strategy0</span><span class="p">(</span><span class="n">score0</span><span class="p">,</span> <span class="n">score1</span><span class="p">)</span>
            <span class="n">score0</span> <span class="o">=</span> <span class="nf">update</span><span class="p">(</span><span class="n">num_rolls</span><span class="p">,</span> <span class="n">score0</span><span class="p">,</span> <span class="n">score1</span><span class="p">,</span> <span class="n">dice</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">score0</span> <span class="o">&gt;=</span> <span class="n">goal</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">who</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">num_rolls</span> <span class="o">=</span> <span class="nf">strategy1</span><span class="p">(</span><span class="n">score1</span><span class="p">,</span> <span class="n">score0</span><span class="p">)</span>
            <span class="n">score1</span> <span class="o">=</span> <span class="nf">update</span><span class="p">(</span><span class="n">num_rolls</span><span class="p">,</span> <span class="n">score1</span><span class="p">,</span> <span class="n">score0</span><span class="p">,</span> <span class="n">dice</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">score1</span> <span class="o">&gt;=</span> <span class="n">goal</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">who</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># END PROBLEM 5
</span>    <span class="k">return</span> <span class="n">score0</span><span class="p">,</span> <span class="n">score1</span>


<span class="c1">#######################
# Phase 2: Strategies #
#######################
</span>

<span class="k">def</span> <span class="nf">always_roll</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return a player strategy that always rolls N dice.

    A player strategy is a function that takes two total scores as arguments
    (the current player</span><span class="sh">'</span><span class="s">s score, and the opponent</span><span class="sh">'</span><span class="s">s score), and returns a
    number of dice that the current player will roll this turn.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="n">strategy</span> <span class="o">=</span> <span class="nf">always_roll</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">strategy</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="mi">3</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">strategy</span><span class="p">(</span><span class="mi">99</span><span class="p">,</span> <span class="mi">99</span><span class="p">)</span>
    <span class="mi">3</span>
    <span class="sh">"""</span>
    <span class="k">assert</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">10</span>

    <span class="c1"># BEGIN PROBLEM 6
</span>    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="k">def</span> <span class="nf">strategy</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Return the number of dice to roll.</span><span class="sh">"""</span>
        <span class="k">return</span> <span class="n">n</span>
    <span class="k">return</span> <span class="n">strategy</span>
    <span class="c1"># END PROBLEM 6
</span>

<span class="k">def</span> <span class="nf">catch_up</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">A player strategy that always rolls 5 dice unless the opponent
    has a higher score, in which case 6 dice are rolled.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="nf">catch_up</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
    <span class="mi">5</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">strategy</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="mi">18</span><span class="p">)</span>
    <span class="mi">6</span>
    <span class="sh">"""</span>
    <span class="k">if</span> <span class="n">score</span> <span class="o">&lt;</span> <span class="n">opponent_score</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">6</span>  <span class="c1"># Roll one more to catch up
</span>    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">5</span>


<span class="k">def</span> <span class="nf">is_always_roll</span><span class="p">(</span><span class="n">strategy</span><span class="p">,</span> <span class="n">goal</span><span class="o">=</span><span class="n">GOAL</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return whether STRATEGY always chooses the same number of dice to roll
    for every possible combination of score and opponent_score
    given a game that goes to GOAL points.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="nf">is_always_roll</span><span class="p">(</span><span class="n">always_roll_5</span><span class="p">)</span>
    <span class="bp">True</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">is_always_roll</span><span class="p">(</span><span class="nf">always_roll</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
    <span class="bp">True</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">is_always_roll</span><span class="p">(</span><span class="n">catch_up</span><span class="p">)</span>
    <span class="bp">False</span>
    <span class="sh">"""</span>
    <span class="c1"># BEGIN PROBLEM 7
</span>    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="k">for</span> <span class="n">score</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">goal</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">opponent_score</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">goal</span><span class="p">):</span>
            <span class="k">if</span> <span class="nf">strategy</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">)</span> <span class="o">!=</span> <span class="nf">strategy</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>
    <span class="c1"># END PROBLEM 7
</span>

<span class="k">def</span> <span class="nf">make_averaged</span><span class="p">(</span><span class="n">original_function</span><span class="p">,</span> <span class="n">times_called</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return a function that returns the average value of ORIGINAL_FUNCTION
    called TIMES_CALLED times.

    To implement this function, you will have to use *args syntax.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="n">dice</span> <span class="o">=</span> <span class="nf">make_test_dice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">averaged_dice</span> <span class="o">=</span> <span class="nf">make_averaged</span><span class="p">(</span><span class="n">roll_dice</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">averaged_dice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">dice</span><span class="p">)</span>  <span class="c1"># The avg of 10 4's, 10 2's, 10 5's, and 10 1's
</span>    <span class="mf">3.0</span>
    <span class="sh">"""</span>

    <span class="c1"># BEGIN PROBLEM 8
</span>    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="k">def</span> <span class="nf">averaged_function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">times_called</span><span class="p">):</span>
            <span class="n">total</span> <span class="o">+=</span> <span class="nf">original_function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">total</span> <span class="o">/</span> <span class="n">times_called</span>
    <span class="k">return</span> <span class="n">averaged_function</span>

    <span class="c1"># END PROBLEM 8
</span>

<span class="k">def</span> <span class="nf">max_scoring_num_rolls</span><span class="p">(</span><span class="n">dice</span><span class="o">=</span><span class="n">six_sided</span><span class="p">,</span> <span class="n">times_called</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return the number of dice (1 to 10) that gives the maximum average score for a turn.
    Assume that the dice always return positive outcomes.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="n">dice</span> <span class="o">=</span> <span class="nf">make_test_dice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">max_scoring_num_rolls</span><span class="p">(</span><span class="n">dice</span><span class="p">)</span>
    <span class="mi">1</span>
    <span class="sh">"""</span>
    <span class="c1"># BEGIN PROBLEM 9
</span>    <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
    <span class="n">max_score</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">min_rolls</span> <span class="o">=</span> <span class="mi">11</span>
    <span class="k">for</span> <span class="n">num_rolls</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>
        <span class="n">score</span> <span class="o">=</span> <span class="nf">make_averaged</span><span class="p">(</span><span class="n">roll_dice</span><span class="p">,</span> <span class="n">times_called</span><span class="p">)(</span><span class="n">num_rolls</span><span class="p">,</span> <span class="n">dice</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">score</span> <span class="o">&gt;</span> <span class="n">max_score</span><span class="p">:</span>
            <span class="n">max_score</span> <span class="o">=</span> <span class="n">score</span>
            <span class="n">min_rolls</span> <span class="o">=</span> <span class="n">num_rolls</span>
        <span class="k">elif</span> <span class="n">score</span> <span class="o">==</span> <span class="n">max_score</span><span class="p">:</span>
            <span class="n">min_rolls</span> <span class="o">=</span> <span class="nf">min</span><span class="p">(</span><span class="n">min_rolls</span><span class="p">,</span> <span class="n">num_rolls</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">min_rolls</span>
    <span class="c1"># END PROBLEM 9
</span>

<span class="k">def</span> <span class="nf">winner</span><span class="p">(</span><span class="n">strategy0</span><span class="p">,</span> <span class="n">strategy1</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Return 0 if strategy0 wins against strategy1, and 1 otherwise.</span><span class="sh">"""</span>
    <span class="n">score0</span><span class="p">,</span> <span class="n">score1</span> <span class="o">=</span> <span class="nf">play</span><span class="p">(</span><span class="n">strategy0</span><span class="p">,</span> <span class="n">strategy1</span><span class="p">,</span> <span class="n">sus_update</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">score0</span> <span class="o">&gt;</span> <span class="n">score1</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>


<span class="k">def</span> <span class="nf">average_win_rate</span><span class="p">(</span><span class="n">strategy</span><span class="p">,</span> <span class="n">baseline</span><span class="o">=</span><span class="nf">always_roll</span><span class="p">(</span><span class="mi">6</span><span class="p">)):</span>
    <span class="sh">"""</span><span class="s">Return the average win rate of STRATEGY against BASELINE. Averages the
    winrate when starting the game as player 0 and as player 1.
    </span><span class="sh">"""</span>
    <span class="n">win_rate_as_player_0</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nf">make_averaged</span><span class="p">(</span><span class="n">winner</span><span class="p">)(</span><span class="n">strategy</span><span class="p">,</span> <span class="n">baseline</span><span class="p">)</span>
    <span class="n">win_rate_as_player_1</span> <span class="o">=</span> <span class="nf">make_averaged</span><span class="p">(</span><span class="n">winner</span><span class="p">)(</span><span class="n">baseline</span><span class="p">,</span> <span class="n">strategy</span><span class="p">)</span>

    <span class="nf">return </span><span class="p">(</span><span class="n">win_rate_as_player_0</span> <span class="o">+</span> <span class="n">win_rate_as_player_1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>


<span class="k">def</span> <span class="nf">run_experiments</span><span class="p">():</span>
    <span class="sh">"""</span><span class="s">Run a series of strategy experiments and report results.</span><span class="sh">"""</span>
    <span class="n">six_sided_max</span> <span class="o">=</span> <span class="nf">max_scoring_num_rolls</span><span class="p">(</span><span class="n">six_sided</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Max scoring num rolls for six-sided dice:</span><span class="sh">"</span><span class="p">,</span> <span class="n">six_sided_max</span><span class="p">)</span>

    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">always_roll(6) win rate:</span><span class="sh">"</span><span class="p">,</span> <span class="nf">average_win_rate</span><span class="p">(</span><span class="nf">always_roll</span><span class="p">(</span><span class="mi">6</span><span class="p">)))</span>  <span class="c1"># near 0.5
</span>    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">catch_up win rate:</span><span class="sh">"</span><span class="p">,</span> <span class="nf">average_win_rate</span><span class="p">(</span><span class="n">catch_up</span><span class="p">))</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">always_roll(3) win rate:</span><span class="sh">"</span><span class="p">,</span> <span class="nf">average_win_rate</span><span class="p">(</span><span class="nf">always_roll</span><span class="p">(</span><span class="mi">3</span><span class="p">)))</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">always_roll(8) win rate:</span><span class="sh">"</span><span class="p">,</span> <span class="nf">average_win_rate</span><span class="p">(</span><span class="nf">always_roll</span><span class="p">(</span><span class="mi">8</span><span class="p">)))</span>

    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">boar_strategy win rate:</span><span class="sh">"</span><span class="p">,</span> <span class="nf">average_win_rate</span><span class="p">(</span><span class="n">boar_strategy</span><span class="p">))</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">sus_strategy win rate:</span><span class="sh">"</span><span class="p">,</span> <span class="nf">average_win_rate</span><span class="p">(</span><span class="n">sus_strategy</span><span class="p">))</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">final_strategy win rate:</span><span class="sh">"</span><span class="p">,</span> <span class="nf">average_win_rate</span><span class="p">(</span><span class="n">final_strategy</span><span class="p">))</span>
    <span class="sh">"</span><span class="s">*** You may add additional experiments as you wish ***</span><span class="sh">"</span>




<span class="k">def</span> <span class="nf">boar_strategy</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">num_rolls</span><span class="o">=</span><span class="mi">6</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">This strategy returns 0 dice if Boar Brawl gives at least THRESHOLD
    points, and returns NUM_ROLLS otherwise. Ignore the Sus Fuss rule.
    </span><span class="sh">"""</span>
    <span class="c1"># BEGIN PROBLEM 10
</span>    <span class="k">if</span> <span class="nf">boar_brawl</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">threshold</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">num_rolls</span>  
    <span class="c1"># END PROBLEM 10
</span>

<span class="k">def</span> <span class="nf">sus_strategy</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">num_rolls</span><span class="o">=</span><span class="mi">6</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">This strategy returns 0 dice when rolling 0 increases the score by at least
    THRESHOLD points, and returns NUM_ROLLS otherwise. Consider both the Boar Brawl and
    Suss Fuss rules.</span><span class="sh">"""</span>
    <span class="c1"># BEGIN PROBLEM 11
</span>    <span class="k">if</span> <span class="nf">sus_points</span><span class="p">(</span><span class="n">score</span> <span class="o">+</span> <span class="nf">boar_brawl</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">))</span> <span class="o">-</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="n">threshold</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">num_rolls</span>
    <span class="c1"># END PROBLEM 11
</span>

<span class="k">def</span> <span class="nf">final_strategy</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">opponent_score</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Write a brief description of your final strategy.

    *** YOUR DESCRIPTION HERE ***
    </span><span class="sh">"""</span>
    <span class="c1"># BEGIN PROBLEM 12
</span>    <span class="k">return</span> <span class="mi">6</span>  <span class="c1"># Remove this line once implemented.
</span>    <span class="c1"># END PROBLEM 12
</span>

<span class="c1">##########################
# Command Line Interface #
##########################
</span>
<span class="c1"># NOTE: The function in this section does not need to be changed. It uses
# features of Python not yet covered in the course.
</span>

<span class="nd">@main</span>
<span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Read in the command-line argument and calls corresponding functions.</span><span class="sh">"""</span>
    <span class="kn">import</span> <span class="n">argparse</span>

    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="p">.</span><span class="nc">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="sh">"</span><span class="s">Play Hog</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">parser</span><span class="p">.</span><span class="nf">add_argument</span><span class="p">(</span>
        <span class="sh">"</span><span class="s">--run_experiments</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">-r</span><span class="sh">"</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="sh">"</span><span class="s">store_true</span><span class="sh">"</span><span class="p">,</span> <span class="nb">help</span><span class="o">=</span><span class="sh">"</span><span class="s">Runs strategy experiments</span><span class="sh">"</span>
    <span class="p">)</span>

    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="nf">parse_args</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">args</span><span class="p">.</span><span class="n">run_experiments</span><span class="p">:</span>
        <span class="nf">run_experiments</span><span class="p">()</span>
</pre></td></tr></tbody></table></code></div></div>

<p>一个简单的项目实现，<del>主要难在语言不通</del>，题设很巧妙，需要我们用到前六节课所学的知识。</p>

<p>最终<code class="language-plaintext highlighter-rouge">python3 -i hog.py</code>有如下测试结果：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nf">run_experiments</span><span class="p">()</span>

<span class="n">Max</span> <span class="n">scoring</span> <span class="n">num</span> <span class="n">rolls</span> <span class="k">for</span> <span class="n">six</span><span class="o">-</span><span class="n">sided</span> <span class="n">dice</span><span class="p">:</span> <span class="mi">7</span>
<span class="nf">always_roll</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="n">win</span> <span class="n">rate</span><span class="p">:</span> <span class="mf">0.494</span>
<span class="n">catch_up</span> <span class="n">win</span> <span class="n">rate</span><span class="p">:</span> <span class="mf">0.5125</span>
<span class="nf">always_roll</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="n">win</span> <span class="n">rate</span><span class="p">:</span> <span class="mf">0.34850000000000003</span>
<span class="nf">always_roll</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span> <span class="n">win</span> <span class="n">rate</span><span class="p">:</span> <span class="mf">0.4635</span>
<span class="n">boar_strategy</span> <span class="n">win</span> <span class="n">rate</span><span class="p">:</span> <span class="mf">0.6685000000000001</span>
<span class="n">sus_strategy</span> <span class="n">win</span> <span class="n">rate</span><span class="p">:</span> <span class="mf">0.6910000000000001</span>
<span class="n">final_strategy</span> <span class="n">win</span> <span class="n">rate</span><span class="p">:</span> <span class="mf">0.511</span>
</pre></td></tr></tbody></table></code></div></div>

<p>与题设在问题10的预期“You should find that running now shows the boar_strategy win rate for close to 66-67%.”</p>

<h2 id="lecture-7-function-abstruction"><span class="me-2">Lecture 7 Function Abstruction</span><a href="#lecture-7-function-abstruction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>函数抽象，主要是进一步介绍高阶函数与lambda表达式。</p>

<p>在课程结尾还讲了Error和Traceback</p>

<h2 id="lecture-8-function-examples"><span class="me-2">Lecture 8 Function Examples</span><a href="#lecture-8-function-examples" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="python修饰器"><span class="me-2">Python修饰器</span><a href="#python修饰器" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>在 Python 中，装饰器（Decorator）是一种强大的语法糖，允许在不修改原有函数代码的情况下，增强或修改函数的行为。它们本质上是一个可调用对象（函数、类等），接受一个函数作为输入，并返回另一个函数。</p>

<p>下面是一个例子：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">trace</span><span class="p">(</span><span class="n">fn</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">traced</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Calling</span><span class="sh">"</span><span class="p">,</span><span class="n">fn</span><span class="p">,</span><span class="sh">"</span><span class="s">on argument</span><span class="sh">"</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
        <span class="k">return</span> <span class="nf">fn</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">traced</span>

<span class="nd">@trace</span>
<span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>
</pre></td></tr></tbody></table></code></div></div>

<p>其中，被<code class="language-plaintext highlighter-rouge">trace</code>修饰的<code class="language-plaintext highlighter-rouge">squre</code>可以等价于：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">square</span> <span class="o">=</span> <span class="nf">trace</span><span class="p">(</span><span class="n">square</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>相当于把函数<code class="language-plaintext highlighter-rouge">squre</code>作为参数传入<code class="language-plaintext highlighter-rouge">trace</code>。</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">trace</code>函数接收原始的<code class="language-plaintext highlighter-rouge">square</code>函数作为参数<code class="language-plaintext highlighter-rouge">fn</code>。</li>
  <li><code class="language-plaintext highlighter-rouge">trace</code>内部定义了<code class="language-plaintext highlighter-rouge">traced</code>函数并返回它，这个<code class="language-plaintext highlighter-rouge">traced</code>函数会替代原始的<code class="language-plaintext highlighter-rouge">square</code>函数。</li>
  <li>新的<code class="language-plaintext highlighter-rouge">square</code>实际上是<code class="language-plaintext highlighter-rouge">trace</code>返回的<code class="language-plaintext highlighter-rouge">traced</code>函数。</li>
</ul>

<p>所以当调用<code class="language-plaintext highlighter-rouge">square(5)</code>时，参数<code class="language-plaintext highlighter-rouge">5</code>被传递给<code class="language-plaintext highlighter-rouge">traced</code>函数的<code class="language-plaintext highlighter-rouge">x</code>参数。</p>

<p>用C语言实现修饰器的效果则如下：</p>

<div class="language-c highlighter-rouge"><div class="code-header">
        <span data-label-text="C"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre><span class="k">typedef</span> <span class="nf">int</span> <span class="p">(</span><span class="o">*</span><span class="n">Function</span><span class="p">)(</span><span class="kt">int</span><span class="p">);</span>

<span class="kt">int</span> <span class="nf">square</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">Function</span> <span class="nf">trace</span><span class="p">(</span><span class="n">Function</span> <span class="n">func</span><span class="p">){</span>
    <span class="k">static</span> <span class="kt">int</span> <span class="n">traced</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">){</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"Calling %p on argument %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">func</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">traced</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="c1">//@trace</span>
    <span class="n">Function</span> <span class="n">decorated</span> <span class="o">=</span> <span class="n">trace</span><span class="p">(</span><span class="n">square</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"Result: %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="n">decorated</span><span class="p">(</span><span class="mi">5</span><span class="p">));</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="lecture-9-recursion"><span class="me-2">Lecture 9 Recursion</span><a href="#lecture-9-recursion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>递归，比较重要的章节，主要是思路，个人认为这里以Python的Environment来解释递归不如直接上树形结构来的直观。实际上下一节课（lecture 10）就是树形递归。</p>

<p>在Python中实现递归会比较方便，因为python提供了灵活的函数返回值，使我们可以返回若干不同类型的值，不同于C/C++，因而在写代码的时候会更简洁一点。</p>

<h2 id="lecture-10-tree-recursion"><span class="me-2">Lecture 10 Tree-Recursion</span><a href="#lecture-10-tree-recursion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>本节课在最后提到了用树形递归加速斐波那契数列问题，实际上这是一个子问题分解，也可以理解为一种特殊的动态规划。</p>

<p>传统的斐波那契直接遵循其递推关系描述：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">fib_recursive</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>
    <span class="k">return</span> <span class="nf">fib_recursive</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nf">fib_recursive</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>我们会发现其存在严重的重复计算问题，利用树形递归的思想，可以加速算法的实现：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">fib_iterative</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>
    
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>  <span class="c1"># 初始化F(0)和F(1)
</span>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>      <span class="c1"># 计算F(i) = F(i-1) + F(i-2)
</span>        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span>    <span class="c1"># 滑动窗口更新
</span>        
    <span class="k">return</span> <span class="n">b</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="lecture-11-sequences"><span class="me-2">Lecture 11 Sequences</span><a href="#lecture-11-sequences" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="python数据类型list"><span class="me-2">Python数据类型：List</span><a href="#python数据类型list" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>列表（list）是有限长度的相同类型的数据的集合，可以类比其他语言的数组，但比它们更强大。</p>

<p>定义一个列表：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">dist</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
</pre></td></tr></tbody></table></code></div></div>

<p>与其他语言相似地，列表的可以被索引访问，索引从0开始，因而<code class="language-plaintext highlighter-rouge">dist[0]=1</code>，利用相应函数可以获取列表的的长度，<code class="language-plaintext highlighter-rouge">len(dist)</code>的值为3。</p>

<p>python允许多维数组，如：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">]]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="mi">30</span>
</pre></td></tr></tbody></table></code></div></div>

<p>python为使用者提供了语法糖，如：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">digits</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="n">digits</span> <span class="o">*</span> <span class="mi">2</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</pre></td></tr></tbody></table></code></div></div>

<p>可以发现digits被复制为2份。</p>

<p>列表的语法糖可以快速生成符合要求的序列：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">odds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">odds</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="for循环"><span class="me-2">for循环</span><a href="#for循环" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>python优化了for循环，如果需要对<code class="language-plaintext highlighter-rouge">digits</code>进行遍历，可以有如下操作：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">digits</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>可以认为<code class="language-plaintext highlighter-rouge">elem</code>为<code class="language-plaintext highlighter-rouge">digits</code>的元素，并随着每次循环<code class="language-plaintext highlighter-rouge">elem</code>自动向后改变，直到最后一个元素。</p>

<p><code class="language-plaintext highlighter-rouge">range(x,y)</code>是一个python内置序列，可以理解为一个左闭右开区间，如：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">sum</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">):</span>
    <span class="nb">sum</span> <span class="o">+=</span> <span class="n">i</span>
</pre></td></tr></tbody></table></code></div></div>

<p>可以等价于
\(i \in [1,11) = [1,10]\\
sum = \sum^{10}_{i=1}i\)
但是要注意，<code class="language-plaintext highlighter-rouge">in</code>作为运算符，其表达式返回一个布尔类型的值，如<code class="language-plaintext highlighter-rouge">1 in digist</code>的返回值为<code class="language-plaintext highlighter-rouge">Ture</code>。</p>

<p>此外，<code class="language-plaintext highlighter-rouge">:</code>运算符也可作为区间，依然符合左闭右开法则，左端省略则认为从0开始，右端省略则认为到最后。如<code class="language-plaintext highlighter-rouge">dist[1:3]</code>表示为从元素1到元素2的子序列</p>

<h2 id="lecture-12-containers"><span class="me-2">Lecture 12 Containers</span><a href="#lecture-12-containers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="list相关的内联函数"><span class="me-2">List相关的内联函数</span><a href="#list相关的内联函数" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>使用<code class="language-plaintext highlighter-rouge">sum(&lt;list&gt;)</code>可以简单实现列表的加和。</p>

<p>如：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nf">sum</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],[</span><span class="mi">4</span><span class="p">])</span>
<span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="string"><span class="me-2">String</span><a href="#string" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p><code class="language-plaintext highlighter-rouge">exec()</code>可接受string类型的参数并作为命令执行。</p>

<p>可以将String理解为特殊的列表。</p>

<h3 id="字典dictionary"><span class="me-2">字典（Dictionary）</span><a href="#字典dictionary" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>在 Python 里，字典（<code class="language-plaintext highlighter-rouge">dict</code>）的功能和其他编程语言中的 <strong>Map</strong>（或者叫哈希表、关联数组）是类似的。它们都借助 <strong>键值对（key-value pairs）</strong> 来存储数据，而且键都是唯一的，如果重复赋值，后面的值会覆盖前面的值。其中键必须是可哈希（不可变）的类型，像字符串、数字、元组（元组里的元素也得是可哈希的）。Python 3.7之后字典会保持插入顺序，迭代时会按照键值对插入的顺序返回。</p>

<h2 id="lecture-13-data-abstraction"><span class="me-2">Lecture 13 Data Abstraction</span><a href="#lecture-13-data-abstraction" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>数据抽象是一个方法论，核心是改变一个功能时不影响另一个功能。</p>

<h2 id="lecture-14-trees"><span class="me-2">Lecture 14 Trees</span><a href="#lecture-14-trees" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>主要讲述用列表实现<strong>树</strong>这个数据结构。</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">tree</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">branches</span><span class="o">=</span><span class="p">[]):</span>
    <span class="k">for</span> <span class="n">branch</span> <span class="ow">in</span> <span class="n">branches</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nf">is_tree</span><span class="p">(</span><span class="n">branch</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">root</span><span class="p">]</span> <span class="o">+</span> <span class="nf">list</span><span class="p">(</span><span class="n">branches</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">root</span><span class="p">(</span><span class="n">tree</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">tree</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">branches</span><span class="p">(</span><span class="n">tree</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">tree</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

<span class="k">def</span> <span class="nf">is_tree</span><span class="p">(</span><span class="n">tree</span><span class="p">):</span>
    <span class="k">if</span> <span class="nf">type</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span> <span class="ow">or</span> <span class="nf">len</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">branch</span> <span class="ow">in</span> <span class="nf">branches</span><span class="p">(</span><span class="n">tree</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nf">is_tree</span><span class="p">(</span><span class="n">branch</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="n">Ture</span>

<span class="k">def</span> <span class="nf">is_leaf</span><span class="p">(</span><span class="n">tree</span><span class="p">):</span>
    <span class="k">return</span> <span class="ow">not</span> <span class="nf">branches</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>

</pre></td></tr></tbody></table></code></div></div>

<p>本节课很有用，建议重复学习。</p>

<h2 id="lecture-15-mutability"><span class="me-2">Lecture 15 Mutability</span><a href="#lecture-15-mutability" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="对象objects"><span class="me-2">对象（Objects)</span><a href="#对象objects" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>本节课终于讲到了对象。面向对象思想深深影响了现代编程语言，个人认为用Java学习面向对象会强过任何语言，因为Java的强面向对象性可以使我们更深刻的理解其特点。</p>

<p>面向对象要求对象拥有<strong>属性</strong>和<strong>方法</strong>，大多数编程语言调用对象的属性与方法都会使用<code class="language-plaintext highlighter-rouge">.</code>；</p>

<p>但这里只是简单的提及，后面应该会细讲</p>

<h3 id="元组tuples"><span class="me-2">元组（Tuples）</span><a href="#元组tuples" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>元组相当于一个逗号序列，但是不可变，这不同于列表。列表是可变的。</p>

<p>这里所说的元组不可变是指大小或者结构，即空间不变，而非值不变。</p>

<h3 id="可变性"><span class="me-2">可变性</span><a href="#可变性" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>在 Python 中，参数传递的方式既不是单纯的值传递，也不是单纯的引用传递，而是采用<strong>共享传递（Call by Sharing）</strong>，也被称作<strong>对象引用传递</strong>。下面详细解释：</p>

<p>共享传递的核心特点</p>

<ul>
  <li><strong>变量是对象的引用</strong>：Python 里，变量存放的是对象的引用，并非对象本身。</li>
  <li><strong>参数传递时引用被复制</strong>：当把参数传递给函数时，实际上是将变量的引用复制给了函数参数。这就使得函数内部的参数和外部的变量指向同一个对象。</li>
  <li>对象的可变性决定了修改行为：
    <ul>
      <li>对于<strong>可变对象</strong>（如列表、字典、集合），在函数内部对其进行修改，外部的原始对象也会受到影响。</li>
      <li>对于<strong>不可变对象</strong>（如整数、字符串、元组），由于无法修改对象本身，在函数内部对参数进行重新赋值时，只是让参数指向了一个新对象，不会改变外部的原始对象。</li>
    </ul>
  </li>
</ul>

<h2 id="lecture-16-iterators"><span class="me-2">Lecture 16 Iterators</span><a href="#lecture-16-iterators" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="迭代器iterator"><span class="me-2">迭代器（Iterator）</span><a href="#迭代器iterator" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>在 Python 中，迭代器（Iterator）是实现了迭代器协议的<strong>对象</strong>，它允许你逐个访问集合中的元素，而无需预先加载整个集合到内存中。这一特性使得 Python 能够高效处理大规模数据，也是 Python 中循环、生成器和许多内置函数的核心机制。</p>

<p>迭代器必须实现两个核心方法：</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">__iter__()</code></strong>：返回迭代器自身（<code class="language-plaintext highlighter-rouge">self</code>），用于在<code class="language-plaintext highlighter-rouge">for</code>循环等场景中获取迭代器。</li>
  <li><strong><code class="language-plaintext highlighter-rouge">__next__()</code></strong>：返回迭代器的下一个元素。当没有更多元素时，抛出<code class="language-plaintext highlighter-rouge">StopIteration</code>异常。</li>
</ul>

<p>迭代器是一次性的，当next为None时结束迭代。</p>

<h3 id="惰性计算lazy-evaluation"><span class="me-2">惰性计算（Lazy Evaluation）</span><a href="#惰性计算lazy-evaluation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>在 Python 中，<strong>惰性计算（Lazy Evaluation）</strong> 是一种重要的编程策略，它允许程序在需要时才进行计算，而非提前计算所有结果。这一特性显著提升了内存效率和程序性能，尤其适用于处理大数据、无限序列或复杂计算。</p>

<p>许多Python的内置函数返回类型为迭代器：</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">map(func, iterable)</code>：将函数应用到每个元素。</p>

    <div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">squares</span> <span class="o">=</span> <span class="nf">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">nums</span><span class="p">)</span>  <span class="c1"># 返回map对象（迭代器）
</span></pre></td></tr></tbody></table></code></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">filter(predicate, iterable)</code>：过滤符合条件的元素。</p>

    <div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">evens</span> <span class="o">=</span> <span class="nf">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">nums</span><span class="p">)</span>  <span class="c1"># 返回filter对象
</span></pre></td></tr></tbody></table></code></div>    </div>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">zip(*iterables)</code>：并行迭代多个序列。</p>

    <div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">Alice</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Bob</span><span class="sh">'</span><span class="p">]</span>
<span class="n">ages</span> <span class="o">=</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
<span class="n">zipped</span> <span class="o">=</span> <span class="nf">zip</span><span class="p">(</span><span class="n">names</span><span class="p">,</span> <span class="n">ages</span><span class="p">)</span>  <span class="c1"># 返回zip对象
</span></pre></td></tr></tbody></table></code></div>    </div>
  </li>
</ul>

<p>此外， <code class="language-plaintext highlighter-rouge">itertools</code>模块也提供了多种惰性工具。</p>

<h2 id="lecture-17-generators"><span class="me-2">Lecture 17 Generators</span><a href="#lecture-17-generators" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="生成器"><span class="me-2">生成器</span><a href="#生成器" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>在Python中，<strong>生成器（Generators）</strong> 是实现惰性计算的一种特殊工具，它允许你在需要时才生成数据，而非一次性计算并存储所有结果。这使得代码更高效、更节省内存，尤其适合处理大数据或无限序列。生成器是一种特殊的迭代器，它的创建方式更简洁：</p>

<ul>
  <li><strong>生成器函数</strong>：使用<code class="language-plaintext highlighter-rouge">yield</code>关键字的函数。</li>
  <li><strong>生成器表达式</strong>：类似列表推导式，但用圆括号<code class="language-plaintext highlighter-rouge">()</code>。</li>
</ul>

<div class="table-wrapper"><table>
  <thead>
    <tr>
      <th><strong>特性</strong></th>
      <th><strong>普通函数</strong></th>
      <th><strong>生成器函数</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>执行方式</strong></td>
      <td>一次性执行完毕</td>
      <td>可以暂停和恢复执行</td>
    </tr>
    <tr>
      <td><strong>状态保存</strong></td>
      <td>不保存状态，每次调用重置</td>
      <td>保存上一次暂停的状态</td>
    </tr>
    <tr>
      <td><strong>返回值</strong></td>
      <td><code class="language-plaintext highlighter-rouge">return</code>返回单个值</td>
      <td><code class="language-plaintext highlighter-rouge">yield</code>返回迭代器（生成器）</td>
    </tr>
    <tr>
      <td><strong>内存占用</strong></td>
      <td>可能高（存储所有结果）</td>
      <td>低（按需生成）</td>
    </tr>
  </tbody>
</table></div>

<p>使用<code class="language-plaintext highlighter-rouge">yield</code>关键字定义，每次调用<code class="language-plaintext highlighter-rouge">next()</code>时恢复执行：</p>
<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">countdown</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">n</span>  <span class="c1"># 暂停执行并返回当前值
</span>        <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>

<span class="c1"># 创建生成器对象
</span><span class="n">c</span> <span class="o">=</span> <span class="nf">countdown</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>  <span class="c1"># 3
</span><span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>  <span class="c1"># 2
</span><span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>  <span class="c1"># 1
</span><span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>  <span class="c1"># StopIteration异常
</span></pre></td></tr></tbody></table></code></div></div>

<p><strong>执行流程</strong>：</p>
<ol>
  <li>调用生成器函数时，函数体不会立即执行，而是返回一个生成器对象。</li>
  <li>每次调用<code class="language-plaintext highlighter-rouge">next()</code>时，函数恢复执行，直到遇到<code class="language-plaintext highlighter-rouge">yield</code>暂停。</li>
  <li>状态（变量值）会被保存，下次调用<code class="language-plaintext highlighter-rouge">next()</code>时继续执行。</li>
</ol>

<p>生成器表达式（Generator Expressions）语法类似列表推导式，但用圆括号：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c1"># 列表推导式：立即生成列表
</span><span class="n">squares_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span>  <span class="c1"># [0, 1, 4, 9, 16]
</span>
<span class="c1"># 生成器表达式：返回生成器对象
</span><span class="n">squares_gen</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>   <span class="c1"># 生成器对象
</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">squares_gen</span><span class="p">))</span>  <span class="c1"># 0
</span><span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">squares_gen</span><span class="p">))</span>  <span class="c1"># 1
</span></pre></td></tr></tbody></table></code></div></div>

<h4 id="高级生成器特性"><span class="me-2">高级生成器特性</span><a href="#高级生成器特性" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>
<p><strong><code class="language-plaintext highlighter-rouge">send()</code>方法</strong></p>

<p>向生成器内部发送值并恢复执行：</p>
<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">receiver</span><span class="p">():</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">item</span> <span class="o">=</span> <span class="k">yield</span>  <span class="c1"># 接收外部发送的值
</span>        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Received: </span><span class="si">{</span><span class="n">item</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="n">r</span> <span class="o">=</span> <span class="nf">receiver</span><span class="p">()</span>
<span class="nf">next</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>  <span class="c1"># 启动生成器，必须先调用一次
</span><span class="n">r</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sh">"</span><span class="s">Hello</span><span class="sh">"</span><span class="p">)</span>  <span class="c1"># 发送值并恢复执行 → 输出: Received: Hello
</span><span class="n">r</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="sh">"</span><span class="s">World</span><span class="sh">"</span><span class="p">)</span>  <span class="c1"># → 输出: Received: World
</span></pre></td></tr></tbody></table></code></div></div>

<p><strong><code class="language-plaintext highlighter-rouge">throw()</code>和<code class="language-plaintext highlighter-rouge">close()</code></strong></p>
<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">throw()</code></strong>：向生成器抛出异常。</li>
  <li><strong><code class="language-plaintext highlighter-rouge">close()</code></strong>：终止生成器。
    <div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="n">gen</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">gen</span><span class="p">))</span>  <span class="c1"># 0
</span><span class="n">gen</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">next</span><span class="p">(</span><span class="n">gen</span><span class="p">))</span>  <span class="c1"># StopIteration异常（生成器已关闭）
</span></pre></td></tr></tbody></table></code></div>    </div>
  </li>
</ul>

<p><strong><code class="language-plaintext highlighter-rouge">yield from</code>（Python 3.3+）</strong>
委托子生成器：</p>
<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">sub_generator</span><span class="p">():</span>
    <span class="k">yield</span> <span class="mi">1</span>
    <span class="k">yield</span> <span class="mi">2</span>

<span class="k">def</span> <span class="nf">main_generator</span><span class="p">():</span>
    <span class="k">yield</span> <span class="k">from</span> <span class="nf">sub_generator</span><span class="p">()</span>  <span class="c1"># 委托子生成器
</span>
<span class="n">gen</span> <span class="o">=</span> <span class="nf">main_generator</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="n">gen</span><span class="p">))</span>  <span class="c1"># [1, 2]
</span></pre></td></tr></tbody></table></code></div></div>

<h2 id="lecture-18-objects"><span class="me-2">Lecture 18 Objects</span><a href="#lecture-18-objects" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>面向对象编程（Object-Oriented Programming，OOP）是一种编程范式，它将数据（属性）和操作数据的方法（行为）封装在<strong>对象</strong>中，并通过<strong>类</strong>来定义对象的结构和行为。Python 是一门支持面向对象编程的语言，提供了类、继承、多态等核心特性。类是对象的蓝图，定义了对象的属性和方法。对象是类的实例，具有类定义的属性和方法。</p>

<p>在Python中：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Students</span><span class="p">:</span>
    <span class="c1">#属性
</span>    <span class="n">name</span> <span class="o">=</span> <span class="sh">"</span><span class="s">Jack</span><span class="sh">"</span>
    <span class="n">age</span> <span class="o">=</span> <span class="mi">18</span>
    <span class="c1">#方法
</span>    <span class="k">def</span> <span class="nf">drink</span><span class="p">():</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">drinking!</span><span class="sh">"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>在C++中：</p>

<div class="language-c++ highlighter-rouge"><div class="code-header">
        <span data-label-text="C++"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Students</span><span class="p">{</span>
    <span class="cp">#属性
</span><span class="nl">private:</span>
    <span class="n">string</span> <span class="n">name</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">age</span><span class="p">;</span>
   
    <span class="cp">#方法
</span><span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">drink</span><span class="p">(){</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"drinking!</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></div></div>

<p>在Java中：</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Students</span><span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">drink</span><span class="o">(){</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"drinking!"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="lecture-19-attributes"><span class="me-2">Lecture 19 Attributes</span><a href="#lecture-19-attributes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>当我们需要调用创建对象时：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">stu</span> <span class="o">=</span> <span class="nc">Students</span><span class="p">()</span> <span class="c1">#python
</span></pre></td></tr></tbody></table></code></div></div>

<div class="language-c++ highlighter-rouge"><div class="code-header">
        <span data-label-text="C++"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="n">Students</span> <span class="nf">stu</span><span class="p">();</span> <span class="c1">//c++</span>
</pre></td></tr></tbody></table></code></div></div>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nc">Students</span> <span class="n">stu</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Students</span><span class="o">();</span> <span class="c1">//Java</span>
</pre></td></tr></tbody></table></code></div></div>

<p>此后如果需要调用对象的属性，可使用<code class="language-plaintext highlighter-rouge">.</code>来操作即可。</p>

<h3 id="构造器构造函数"><span class="me-2">构造器/构造函数</span><a href="#构造器构造函数" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>在python中，如果需要在创建对象时对对象的属性进行初始化，则需要用到内联函数<code class="language-plaintext highlighter-rouge">__init__()</code>:</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Students</span><span class="p">:</span>
    <span class="c1">#没有特殊的初始化属性
</span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">self</span><span class="p">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
  
<span class="n">Tom</span> <span class="o">=</span> <span class="nc">Student</span><span class="p">(</span><span class="sh">'</span><span class="s">Tom</span><span class="sh">'</span><span class="p">,</span><span class="mi">18</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">Tom</span><span class="p">.</span><span class="n">name</span><span class="p">)</span> <span class="c1">#Tom
</span></pre></td></tr></tbody></table></code></div></div>

<p>这里的<code class="language-plaintext highlighter-rouge">self</code>不是需要填写的形式参数，而是所有实例方法必须有的参数，指实例自己。</p>

<p>如果熟悉C/C++或Java的人会在这里感到迷惑，因为name和age并没有被显式地定义。事实上这在Python中是被允许的，但是在其它很多语言中是不被允许的，例如Java：</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Students</span><span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span><span class="c1">//显式地定义属性，相当于实例化前的self.name</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="nf">Student</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span><span class="kt">int</span> <span class="n">age</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span><span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="n">args</span><span class="o">[]){</span> <span class="c1">//main函数</span>
        <span class="nc">Students</span> <span class="nc">Tom</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Students</span><span class="o">(</span><span class="s">"Tom"</span><span class="o">,</span><span class="mi">18</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Tom</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>在Java中，初始化函数/构造函数被成为<strong>构造器</strong>，是一个不需要声明返回值的、和类名称相同的函数。<code class="language-plaintext highlighter-rouge">this</code>关键字类似于<code class="language-plaintext highlighter-rouge">self</code>，这里的<code class="language-plaintext highlighter-rouge">this.age</code>等于在前面声明的<code class="language-plaintext highlighter-rouge">private int age</code>，而<code class="language-plaintext highlighter-rouge">age</code>是形式参数中的<code class="language-plaintext highlighter-rouge">age</code>。</p>

<p>在C++中：</p>

<div class="language-c++ highlighter-rouge"><div class="code-header">
        <span data-label-text="C++"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Students</span><span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">string</span> <span class="n">name</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">age</span><span class="p">;</span>

<span class="nl">public:</span>
    <span class="n">Students</span><span class="p">(</span><span class="n">string</span> <span class="n">_name</span><span class="p">,</span><span class="kt">int</span> <span class="n">_age</span><span class="p">){</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">_name</span><span class="p">;</span>
        <span class="n">age</span> <span class="o">=</span> <span class="n">_age</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="o">~</span><span class="n">Students</span><span class="p">(){</span>
        <span class="k">delete</span><span class="p">[]</span> <span class="n">string</span><span class="p">;</span>
        <span class="k">delete</span> <span class="n">age</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></div></div>

<p>初始化函数/构造函数被成为<strong>构造函数</strong>，是一个不需要声明返回值的、和类名称相同的函数，与其匹配的是析构函数，在删除对象时调用。</p>

<h2 id="lecture-20-inheritance"><span class="me-2">Lecture 20 Inheritance</span><a href="#lecture-20-inheritance" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>继承，即子类继承父类的属性和方法，可扩展或修改父类行为。可以认为是父类的拓展。</p>

<p>在python中：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Animal</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">speak</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sh">"</span><span class="s">Generic sound</span><span class="sh">"</span>
    <span class="k">def</span> <span class="nf">drink</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sh">"</span><span class="s">drink</span><span class="sh">"</span>

<span class="k">class</span> <span class="nc">Cat</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>  <span class="c1"># 继承自Animal
</span>    <span class="k">def</span> <span class="nf">speak</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>  <span class="c1"># 方法重写
</span>        <span class="k">return</span> <span class="sh">"</span><span class="s">Meow</span><span class="sh">"</span>

<span class="n">cat</span> <span class="o">=</span> <span class="nc">Cat</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="n">cat</span><span class="p">.</span><span class="nf">speak</span><span class="p">())</span>  <span class="c1"># → "Meow"
</span><span class="nf">print</span><span class="p">(</span><span class="n">cat</span><span class="p">.</span><span class="nf">drink</span><span class="p">())</span>  <span class="c1"># → "drink"
</span></pre></td></tr></tbody></table></code></div></div>

<p>方法重写是指在子类中实现与父类同名的函数时，其功能会覆盖父类的功能，当你调用时，使用的是子类实现的功能。当子类没有实现时，依旧可以调用该功能，此时是父类实现的功能。</p>

<p>面向对象的核心奥义之一是：<strong>不要重复实现方法</strong>。这也是继承这一特性出现的原因。</p>

<h2 id="lecture-21-representation"><span class="me-2">Lecture 21 Representation</span><a href="#lecture-21-representation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="represent"><span class="me-2">represent</span><a href="#represent" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>在 Python 里，<code class="language-plaintext highlighter-rouge">repr()</code> 是一个内置函数，其作用是返回一个对象的字符串表示形式，并且这个字符串应当是可解析的，或者说能清晰展示对象内容。</p>

<p>这意味着使用<code class="language-plaintext highlighter-rouge">repr()</code>可以获取构造该对象的代码。</p>

<p>如：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">datetime</span>

<span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="nf">now</span><span class="p">()</span>

<span class="nf">print</span><span class="p">(</span><span class="nf">str</span><span class="p">(</span><span class="n">today</span><span class="p">))</span>   <span class="c1"># 输出：2025-07-05 12:30:45.123456（便于用户阅读）
</span><span class="nf">print</span><span class="p">(</span><span class="nf">repr</span><span class="p">(</span><span class="n">today</span><span class="p">))</span>  <span class="c1"># 输出：datetime.datetime(2025, 7, 5, 12, 30, 45, 123456)（便于开发者理解）
</span></pre></td></tr></tbody></table></code></div></div>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="nc">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="nc">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="nf">print</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>  <span class="c1"># 输出：[Point(0, 0), Point(1, 1)]
</span></pre></td></tr></tbody></table></code></div></div>

<p>在自定义类中，我们可以通过 <code class="language-plaintext highlighter-rouge">__repr__()</code> 方法来定义对象的 <code class="language-plaintext highlighter-rouge">repr()</code> 输出。按照惯例，这个方法返回的字符串格式应该是 <code class="language-plaintext highlighter-rouge">ClassName(arg1, arg2, ...)</code>：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Point</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="n">self</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
    
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="sh">'</span><span class="s">Point(</span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">x</span><span class="si">}</span><span class="s">, </span><span class="si">{</span><span class="n">self</span><span class="p">.</span><span class="n">y</span><span class="si">}</span><span class="s">)</span><span class="sh">'</span>

<span class="n">p</span> <span class="o">=</span> <span class="nc">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">repr</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>  <span class="c1"># 输出：Point(3, 4)
</span></pre></td></tr></tbody></table></code></div></div>

<h3 id="格式化字符串"><span class="me-2">格式化字符串</span><a href="#格式化字符串" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>Python 3.6之后引入了全新的格式化字符串方法，也就是课程视频中提到的F-String。直接在大括号中输入表达式即可。</p>

<p>如：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="n">name</span> <span class="o">=</span> <span class="sh">"</span><span class="s">David</span><span class="sh">"</span>
<span class="n">age</span> <span class="o">=</span> <span class="mi">40</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Hello, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s">! You are </span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s"> years old.</span><span class="sh">"</span><span class="p">)</span>
<span class="c1"># 输出：Hello, David! You are 40 years old.
</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">20</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">The sum of </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s"> and </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s"> is </span><span class="si">{</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="c1"># 输出：The sum of 10 and 20 is 30
</span>
<span class="n">text</span> <span class="o">=</span> <span class="sh">"</span><span class="s">hello</span><span class="sh">"</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Uppercase: </span><span class="si">{</span><span class="n">text</span><span class="p">.</span><span class="nf">upper</span><span class="p">()</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
<span class="c1"># 输出：Uppercase: HELLO
</span>
<span class="n">price</span> <span class="o">=</span> <span class="mf">9.99</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Price: $</span><span class="si">{</span><span class="n">price</span><span class="si">:</span><span class="p">.</span><span class="mi">2</span><span class="n">f</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>  <span class="c1"># 保留2位小数
# 输出：Price: $9.99
</span>
<span class="n">person</span> <span class="o">=</span> <span class="p">{</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">Eve</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">age</span><span class="sh">"</span><span class="p">:</span> <span class="mi">28</span><span class="p">}</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">person</span><span class="p">[</span><span class="sh">'</span><span class="s">name</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s"> is </span><span class="si">{</span><span class="n">person</span><span class="p">[</span><span class="sh">'</span><span class="s">age</span><span class="sh">'</span><span class="p">]</span><span class="si">}</span><span class="s"> years old</span><span class="sh">"</span><span class="p">)</span>
<span class="c1"># 输出：Eve is 28 years old
</span></pre></td></tr></tbody></table></code></div></div>

<p>这与C语言的格式化字符串有些许不同：</p>

<pre><code class="language-C">char name[] = "David";
int age = 40;
printf("Hello, %s! You are %d years old.\n",name,age);
</code></pre>

<h3 id="魔术方法magic-methods"><span class="me-2">魔术方法（Magic Methods）</span><a href="#魔术方法magic-methods" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>在 Python 中，<strong>魔术方法</strong>（Magic Methods）也被称为<strong>特殊方法</strong>（Special Methods），是一类以双下划线 <code class="language-plaintext highlighter-rouge">__</code> 开头和结尾的特殊方法。它们为类提供了丰富的内置功能，使得自定义类能够像内置类型一样进行各种操作（如加减乘除、迭代、比较等）。</p>

<p>初始化与销毁：</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">__init__(self, ...)</code>类的构造函数，创建对象时自动调用。</li>
  <li><code class="language-plaintext highlighter-rouge">__del__(self)</code>对象被销毁时调用（垃圾回收前），常用于资源释放。</li>
</ul>

<p>字符串表示：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">__str__(self)</code>返回用户友好的字符串表示，用于 <code class="language-plaintext highlighter-rouge">print()</code> 和 <code class="language-plaintext highlighter-rouge">str()</code>。</li>
  <li><code class="language-plaintext highlighter-rouge">__repr__(self)</code>返回开发者友好的字符串表示，用于调试和 <code class="language-plaintext highlighter-rouge">repr()</code>。</li>
</ul>

<p>算术运算符：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">__sub__</code>：减法（<code class="language-plaintext highlighter-rouge">-</code>）</li>
  <li><code class="language-plaintext highlighter-rouge">__mul__</code>：乘法（<code class="language-plaintext highlighter-rouge">*</code>）</li>
  <li><code class="language-plaintext highlighter-rouge">__truediv__</code>：除法（<code class="language-plaintext highlighter-rouge">/</code>）</li>
  <li><code class="language-plaintext highlighter-rouge">__floordiv__</code>：整除（<code class="language-plaintext highlighter-rouge">//</code>）</li>
  <li><code class="language-plaintext highlighter-rouge">__mod__</code>：取模（<code class="language-plaintext highlighter-rouge">%</code>）</li>
  <li><code class="language-plaintext highlighter-rouge">__pow__</code>：幂运算（<code class="language-plaintext highlighter-rouge">**</code>）</li>
</ul>

<p>还有很多其他的，这里不过多阐述。</p>

<h2 id="lecture-22-composition"><span class="me-2">Lecture 22 Composition</span><a href="#lecture-22-composition" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="链表linked-list"><span class="me-2">链表（LInked List）</span><a href="#链表linked-list" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>链表在C语言中已经学过：</p>

<pre><code class="language-C">struct node{
    int id;
    node *next;
}Node;

Node *phead = (*Node)malloc(sizeof(Node));
phead-&gt;id = -1;
phead-&gt;next = NULL;

void add(){
	...
}
</code></pre>

<p>C++的STL（Standard TemplateLibrary，标准模版库）中已经实现好双端链表和单向链表：</p>

<div class="language-c++ highlighter-rouge"><div class="code-header">
        <span data-label-text="C++"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;list&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">list</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">myList</span><span class="p">;</span>
    <span class="n">myList</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>     <span class="c1">// 尾部插入</span>
    <span class="n">myList</span><span class="p">.</span><span class="n">push_front</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>    <span class="c1">// 头部插入</span>
    
    <span class="c1">// 遍历链表</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">num</span> <span class="o">:</span> <span class="n">myList</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">num</span> <span class="o">&lt;&lt;</span> <span class="s">" "</span><span class="p">;</span>
    <span class="p">}</span>
    
    <span class="n">myList</span><span class="p">.</span><span class="n">pop_front</span><span class="p">();</span>      <span class="c1">// 删除头部元素</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">Size: "</span> <span class="o">&lt;&lt;</span> <span class="n">myList</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>  <span class="c1">// 输出: 1</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>其中<code class="language-plaintext highlighter-rouge">std::list</code>为双向链表， <code class="language-plaintext highlighter-rouge">std::forward_list</code>为单向链表</p>

<p>。</p>

<p>Java 的标准库中提供了 <code class="language-plaintext highlighter-rouge">java.util.LinkedList</code> 类，它实现了双向链表的功能，并实现了 <code class="language-plaintext highlighter-rouge">List</code> 和 <code class="language-plaintext highlighter-rouge">Deque</code> 接口，如：</p>

<div class="language-java highlighter-rouge"><div class="code-header">
        <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">java.util.LinkedList</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LinkedListExample</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 创建链表</span>
        <span class="nc">LinkedList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinkedList</span><span class="o">&lt;&gt;();</span>
        
        <span class="c1">// 添加元素</span>
        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"Apple"</span><span class="o">);</span>
        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"Banana"</span><span class="o">);</span>
        <span class="n">list</span><span class="o">.</span><span class="na">addFirst</span><span class="o">(</span><span class="s">"Cherry"</span><span class="o">);</span>
        
        <span class="c1">// 遍历链表</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">fruit</span> <span class="o">:</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">fruit</span><span class="o">);</span>
        <span class="o">}</span>
        
        <span class="c1">// 移除元素</span>
        <span class="n">list</span><span class="o">.</span><span class="na">removeFirst</span><span class="o">();</span>
        
        <span class="c1">// 获取链表大小</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Size: "</span> <span class="o">+</span> <span class="n">list</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table></code></div></div>

<p>而Python中并没有内置的链表结构，意味着我们需要自己实现。在课程中，老师给到一个单端链表的实现：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">List</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span><span class="nb">id</span><span class="p">,</span><span class="nb">next</span> <span class="o">=</span> <span class="n">empty</span><span class="p">):</span>
        <span class="k">assert</span> <span class="nb">next</span> <span class="ow">is</span> <span class="n">Link</span> <span class="n">empty</span> <span class="ow">or</span> <span class="nf">isinstance</span><span class="p">(</span><span class="nb">next</span><span class="p">,</span> <span class="n">Link</span><span class="p">)</span>
        <span class="n">self</span><span class="p">.</span><span class="nb">id</span> <span class="o">=</span> <span class="nb">id</span>
        <span class="n">self</span><span class="p">.</span><span class="nb">next</span> <span class="o">=</span> <span class="nb">next</span>
      
<span class="n">s</span> <span class="o">=</span> <span class="nc">List</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nc">List</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nc">List</span><span class="p">(</span><span class="mi">3</span><span class="p">)))</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="lecture-23-efficiency"><span class="me-2">Lecture 23 Efficiency</span><a href="#lecture-23-efficiency" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>简单介绍了时间复杂度、空间复杂度和记忆化。</p>

<p>如果要了解或者深入研究应当参考《数据结构与算法》这门课。</p>

<h2 id="lecture-24-decomposition"><span class="me-2">Lecture 24 Decomposition</span><a href="#lecture-24-decomposition" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>模块化设计，现场实现了一个Restaurant例子。</p>

<h2 id="lecture-25-data-examples"><span class="me-2">Lecture 25 Data Examples</span><a href="#lecture-25-data-examples" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>给到了迭代器、链表的例子，建议跟代码敲一遍。</p>

<h2 id="lecture-30-calculator"><span class="me-2">Lecture 30 Calculator</span><a href="#lecture-30-calculator" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<h3 id="异常与异常处理"><span class="me-2">异常与异常处理</span><a href="#异常与异常处理" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>异常在前文Lecture 7已有提过，主要是程序运行时产生的错误，常见的错误有：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">SyntaxError</code>：语法错误</li>
  <li><code class="language-plaintext highlighter-rouge">TypeError</code>：类型错误（如对非数字类型进行数学运算）</li>
  <li><code class="language-plaintext highlighter-rouge">ValueError</code>：值错误（如 <code class="language-plaintext highlighter-rouge">int("abc")</code>）</li>
  <li><code class="language-plaintext highlighter-rouge">IndexError</code>：索引越界</li>
  <li><code class="language-plaintext highlighter-rouge">KeyError</code>：字典键不存在</li>
  <li><code class="language-plaintext highlighter-rouge">FileNotFoundError</code>：文件不存在</li>
  <li><code class="language-plaintext highlighter-rouge">ZeroDivisionError</code>：除零错误</li>
</ul>

<p>在 Python 中，异常处理是一种捕获和响应程序运行时错误的机制。通过异常处理，程序可以在遇到错误时不会崩溃，而是执行特定的恢复或清理操作。 Python 异常处理的核心概念和用法有：</p>

<h4 id="try-except-块"><span class="me-2"><code class="language-plaintext highlighter-rouge">try-except</code> 块</span><a href="#try-except-块" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<p>使用 <code class="language-plaintext highlighter-rouge">try</code> 块包裹可能出错的代码，<code class="language-plaintext highlighter-rouge">except</code> 块处理特定类型的异常，使用 <code class="language-plaintext highlighter-rouge">except Exception as e</code> 捕获所有异常，并通过变量 <code class="language-plaintext highlighter-rouge">e</code> 获取异常信息：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">/</span> <span class="mi">0</span>  <span class="c1"># 可能引发 ZeroDivisionError
</span><span class="k">except</span> <span class="nb">ZeroDivisionError</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Error: 除数不能为零！</span><span class="sh">"</span><span class="p">)</span>
<span class="c1">#-------------------------
</span><span class="k">try</span><span class="p">:</span>
    <span class="n">num</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="sh">"</span><span class="s">abc</span><span class="sh">"</span><span class="p">)</span>  <span class="c1"># 可能引发 ValueError
</span>    <span class="n">result</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">/</span> <span class="n">num</span>  <span class="c1"># 可能引发 ZeroDivisionError
</span><span class="k">except</span> <span class="nb">ValueError</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Error: 输入不是有效的整数！</span><span class="sh">"</span><span class="p">)</span>
<span class="k">except</span> <span class="nb">ZeroDivisionError</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Error: 除数不能为零！</span><span class="sh">"</span><span class="p">)</span>
<span class="c1">#-------------------------
</span><span class="k">try</span><span class="p">:</span>
    <span class="c1"># 可能引发多种异常的代码
</span>    <span class="nb">file</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">nonexistent.txt</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">r</span><span class="sh">"</span><span class="p">)</span>
<span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">发生错误: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>  <span class="c1"># 输出具体错误信息
</span></pre></td></tr></tbody></table></code></div></div>

<p>使用 <code class="language-plaintext highlighter-rouge">traceback</code> 模块获取异常的堆栈跟踪信息：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="n">traceback</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">/</span> <span class="mi">0</span>
<span class="k">except</span> <span class="nb">ZeroDivisionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">traceback</span><span class="p">.</span><span class="nf">print_exc</span><span class="p">()</span>  <span class="c1"># 打印完整的错误堆栈
</span></pre></td></tr></tbody></table></code></div></div>

<p><code class="language-plaintext highlighter-rouge">else</code> 块在 <code class="language-plaintext highlighter-rouge">try</code> 块没有引发异常时执行；而<code class="language-plaintext highlighter-rouge">finally</code> 块无论是否发生异常都会执行，常用于资源清理：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">/</span> <span class="mi">2</span>
<span class="k">except</span> <span class="nb">ZeroDivisionError</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Error: 除数不能为零！</span><span class="sh">"</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">结果: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>  <span class="c1"># 当没有异常时执行
</span><span class="k">finally</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">over</span><span class="sh">"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>使用 <code class="language-plaintext highlighter-rouge">raise</code> 手动触发异常：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">divide</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="nc">ZeroDivisionError</span><span class="p">(</span><span class="sh">"</span><span class="s">除数不能为零！</span><span class="sh">"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="nf">divide</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">except</span> <span class="nb">ZeroDivisionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>  <span class="c1"># 输出: 除数不能为零！
</span></pre></td></tr></tbody></table></code></div></div>

<p>通过继承 <code class="language-plaintext highlighter-rouge">Exception</code> 类可以创建自定义异常：</p>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">InvalidAgeError</span><span class="p">(</span><span class="nb">Exception</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="sh">"</span><span class="s">年龄不能为负数！</span><span class="sh">"</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">message</span>
        <span class="nf">super</span><span class="p">().</span><span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">message</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">check_age</span><span class="p">(</span><span class="n">age</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">age</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="nc">InvalidAgeError</span><span class="p">()</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">年龄有效: </span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nf">check_age</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span>
<span class="k">except</span> <span class="n">InvalidAgeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>  <span class="c1"># 输出: 年龄不能为负数！
</span></pre></td></tr></tbody></table></code></div></div>

<h1 id="part2-scheme">Part2 Scheme</h1>

<h2 id="lecture-28-scheme"><span class="me-2">Lecture 28 Scheme</span><a href="#lecture-28-scheme" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>26、27不存在，课程从28继续开始按顺序编号。</p>

<p>从本章开始介绍一门全新的编程语言：Scheme。Scheme是Lisp的方言，Scheme只重视括号，而不关注缩进和空格。</p>

<p>从本节课开始，我们需要用Python编写一个Scheme解释器，这是一项很有挑战性的工程。</p>

<h2 id="lecture-29-scheme-lists"><span class="me-2">Lecture 29 Scheme Lists</span><a href="#lecture-29-scheme-lists" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>&lt;Scheme&gt;</p>

<h2 id="lecture-30-calculator-1"><span class="me-2">Lecture 30 Calculator</span><a href="#lecture-30-calculator-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>&lt;Scheme&gt;</p>

<h2 id="lecture-31-interpreter"><span class="me-2">Lecture 31 Interpreter</span><a href="#lecture-31-interpreter" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>从本节课开始，正式介绍Scheme语言及实现其解释器的各种前置知识，可以认为是《编译原理》的启蒙和初级教学，</p>

<h2 id="lecture-32-tail-calls-optional"><span class="me-2">Lecture 32 Tail Calls (Optional)</span><a href="#lecture-32-tail-calls-optional" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>尾递归。</p>

<p>&lt;Scheme&gt;</p>

<h2 id="lecture-33-programs-as-data"><span class="me-2">Lecture 33 Programs as Data</span><a href="#lecture-33-programs-as-data" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>&lt;Scheme&gt;</p>

<h2 id="lecture-34-macros"><span class="me-2">Lecture 34 Macros</span><a href="#lecture-34-macros" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>&lt;Scheme&gt;</p>

<h2 id="porject-4-scheme"><span class="me-2">Porject 4 Scheme</span><a href="#porject-4-scheme" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<div class="table-wrapper"><table>
  <tbody>
    <tr>
      <td>从节开始，进行最后一个项目的编写，可以在[Scheme</td>
      <td>CS自学社区](http://www.learncs.site/docs/curriculum-resource/cs61a/cs61a_zh/project/scheme)查看中文版的任务。</td>
    </tr>
  </tbody>
</table></div>

<p>项目中将要编辑的文件：</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">scheme_eval_apply.py</code>：Scheme 表达式递归求值器</li>
  <li><code class="language-plaintext highlighter-rouge">scheme_forms.py</code>：特殊形式求值</li>
  <li><code class="language-plaintext highlighter-rouge">scheme_classes.py</code>：描述 Scheme 表达式的类</li>
  <li><code class="language-plaintext highlighter-rouge">questions.scm</code>：需要实现的 Scheme 过程</li>
</ul>

<h3 id="问题-1"><span class="me-2">问题 1</span><a href="#问题-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre>    <span class="k">def</span> <span class="nf">define</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Define Scheme SYMBOL to have VALUE.</span><span class="sh">"""</span>
        <span class="c1"># BEGIN PROBLEM 1
</span>        <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
        <span class="n">self</span><span class="p">.</span><span class="n">bindings</span><span class="p">[</span><span class="n">symbol</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="c1"># END PROBLEM 1
</span>
    <span class="k">def</span> <span class="nf">lookup</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">symbol</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s">Return the value bound to SYMBOL. Errors if SYMBOL is not found.</span><span class="sh">"""</span>
        <span class="c1"># BEGIN PROBLEM 1
</span>        <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
        <span class="k">if</span> <span class="n">symbol</span> <span class="ow">in</span> <span class="n">self</span><span class="p">.</span><span class="n">bindings</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">bindings</span><span class="p">[</span><span class="n">symbol</span><span class="p">]</span>
        <span class="c1"># END PROBLEM 1
</span>        <span class="k">raise</span> <span class="nc">SchemeError</span><span class="p">(</span><span class="sh">'</span><span class="s">unknown identifier: {0}</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">symbol</span><span class="p">))</span>
</pre></td></tr></tbody></table></code></div></div>

<h3 id="问题-2"><span class="me-2">问题 2</span><a href="#问题-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">scheme_apply</span><span class="p">(</span><span class="n">procedure</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">env</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">Apply Scheme PROCEDURE to argument values ARGS (a Scheme list) in
    Frame ENV, the current environment.</span><span class="sh">"""</span>
    <span class="nf">validate_procedure</span><span class="p">(</span><span class="n">procedure</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">Frame</span><span class="p">):</span>
       <span class="k">assert</span> <span class="bp">False</span><span class="p">,</span> <span class="sh">"</span><span class="s">Not a Frame: {}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
    <span class="k">if</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">procedure</span><span class="p">,</span> <span class="n">BuiltinProcedure</span><span class="p">):</span>
        <span class="c1"># BEGIN PROBLEM 2
</span>        <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">args: </span><span class="si">{</span><span class="n">args</span><span class="si">}</span><span class="s">, args.first: </span><span class="si">{</span><span class="n">args</span><span class="p">.</span><span class="n">first</span><span class="si">}</span><span class="s">, args.rest: </span><span class="si">{</span><span class="n">args</span><span class="p">.</span><span class="n">rest</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">nil</span><span class="p">:</span>
            <span class="n">res</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">first</span><span class="p">)</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="n">rest</span>
        <span class="k">if</span> <span class="n">procedure</span><span class="p">.</span><span class="n">need_env</span><span class="p">:</span>
            <span class="n">res</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>    
        <span class="c1"># END PROBLEM 2
</span>        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># BEGIN PROBLEM 2
</span>            <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
            <span class="k">return</span> <span class="n">procedure</span><span class="p">.</span><span class="nf">py_func</span><span class="p">(</span><span class="o">*</span><span class="n">res</span><span class="p">)</span> 
            <span class="c1"># END PROBLEM 2
</span>        <span class="k">except</span> <span class="nb">TypeError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nc">SchemeError</span><span class="p">(</span><span class="sh">'</span><span class="s">incorrect number of arguments: {0}</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">procedure</span><span class="p">))</span>
    <span class="k">elif</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">procedure</span><span class="p">,</span> <span class="n">LambdaProcedure</span><span class="p">):</span>
        <span class="c1"># BEGIN PROBLEM 9
</span>        <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
        <span class="c1"># END PROBLEM 9
</span>    <span class="k">elif</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">procedure</span><span class="p">,</span> <span class="n">MuProcedure</span><span class="p">):</span>
        <span class="c1"># BEGIN PROBLEM 11
</span>        <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
        <span class="c1"># END PROBLEM 11
</span>    <span class="k">else</span><span class="p">:</span>
        <span class="k">assert</span> <span class="bp">False</span><span class="p">,</span> <span class="sh">"</span><span class="s">Unexpected procedure: {}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">procedure</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div></div>

<p>Python作为弱类型语言实在是令人抓狂，需要注意的是，args是一个<code class="language-plaintext highlighter-rouge">Pair</code>类型，可以在程序运行时发现，执行<code class="language-plaintext highlighter-rouge"> print(f"args: {args}, args.first: {args.first}, args.rest: {args.rest}")</code>时返回如下结果：</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>args: (2 2), args.first: 2, args.rest: (2)
</pre></td></tr></tbody></table></code></div></div>

<p>这说明args和args.rest是相同类型，而args.first是数字类型。</p>

<h3 id="问题-3"><span class="me-2">问题 3</span><a href="#问题-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<div class="language-python highlighter-rouge"><div class="code-header">
        <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">scheme_eval</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">env</span><span class="p">,</span> <span class="n">_</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span> <span class="c1"># Optional third argument is ignored
</span>    <span class="sh">"""</span><span class="s">Evaluate Scheme expression EXPR in Frame ENV.
</span><span class="gp">
    &gt;&gt;&gt;</span> <span class="n">expr</span> <span class="o">=</span> <span class="nf">read_line</span><span class="p">(</span><span class="sh">'</span><span class="s">(+ 2 2)</span><span class="sh">'</span><span class="p">)</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="n">expr</span>
    <span class="nc">Pair</span><span class="p">(</span><span class="sh">'</span><span class="s">+</span><span class="sh">'</span><span class="p">,</span> <span class="nc">Pair</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nc">Pair</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">nil</span><span class="p">)))</span>
    <span class="o">&gt;&gt;&gt;</span> <span class="nf">scheme_eval</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="nf">create_global_frame</span><span class="p">())</span>
    <span class="mi">4</span>
    <span class="sh">"""</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">scheme_eval: </span><span class="si">{</span><span class="n">expr</span><span class="si">}</span><span class="s">, env: </span><span class="si">{</span><span class="n">env</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
    <span class="c1"># Evaluate atoms
</span>    <span class="k">if</span> <span class="nf">scheme_symbolp</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  scheme_symbolp(expr), scheme_eval: </span><span class="si">{</span><span class="n">expr</span><span class="si">}</span><span class="s">, env: </span><span class="si">{</span><span class="n">env</span><span class="si">}</span><span class="s">, return value: </span><span class="si">{</span><span class="n">env</span><span class="p">.</span><span class="nf">lookup</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">env</span><span class="p">.</span><span class="nf">lookup</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        
    <span class="k">elif</span> <span class="nf">self_evaluating</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  self_evaluating(expr), scheme_eval: </span><span class="si">{</span><span class="n">expr</span><span class="si">}</span><span class="s">, return value: </span><span class="si">{</span><span class="n">expr</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">expr</span>
    
    <span class="c1"># All non-atomic expressions are lists (combinations)
</span>    <span class="k">if</span> <span class="ow">not</span> <span class="nf">scheme_listp</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  not scheme_listp(expr), scheme_eval: </span><span class="si">{</span><span class="n">expr</span><span class="si">}</span><span class="s">, raise SchemeError</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">raise</span> <span class="nc">SchemeError</span><span class="p">(</span><span class="sh">'</span><span class="s">malformed list: {0}</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="nf">repl_str</span><span class="p">(</span><span class="n">expr</span><span class="p">)))</span>
    <span class="n">first</span><span class="p">,</span> <span class="n">rest</span> <span class="o">=</span> <span class="n">expr</span><span class="p">.</span><span class="n">first</span><span class="p">,</span> <span class="n">expr</span><span class="p">.</span><span class="n">rest</span>
    <span class="k">if</span> <span class="nf">scheme_symbolp</span><span class="p">(</span><span class="n">first</span><span class="p">)</span> <span class="ow">and</span> <span class="n">first</span> <span class="ow">in</span> <span class="n">scheme_forms</span><span class="p">.</span><span class="n">SPECIAL_FORMS</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  scheme_symbolp(first) and first in scheme_forms.SPECIAL_FORMS, first: </span><span class="si">{</span><span class="n">first</span><span class="si">}</span><span class="s">, rest: </span><span class="si">{</span><span class="n">rest</span><span class="si">}</span><span class="s">, env: </span><span class="si">{</span><span class="n">env</span><span class="si">}</span><span class="s">, return value: </span><span class="si">{</span><span class="n">scheme_forms</span><span class="p">.</span><span class="n">SPECIAL_FORMS</span><span class="p">[</span><span class="n">first</span><span class="p">](</span><span class="n">rest</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">scheme_forms</span><span class="p">.</span><span class="n">SPECIAL_FORMS</span><span class="p">[</span><span class="n">first</span><span class="p">](</span><span class="n">rest</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># BEGIN PROBLEM 3
</span>        <span class="sh">"</span><span class="s">*** YOUR CODE HERE ***</span><span class="sh">"</span>
        <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">  expr: </span><span class="si">{</span><span class="n">expr</span><span class="si">}</span><span class="s">, first: </span><span class="si">{</span><span class="n">first</span><span class="si">}</span><span class="s">, rest: </span><span class="si">{</span><span class="n">rest</span><span class="si">}</span><span class="s">, env: </span><span class="si">{</span><span class="n">env</span><span class="si">}</span><span class="s">, processer: </span><span class="si">{</span><span class="nf">scheme_eval</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
        <span class="n">processer</span> <span class="o">=</span> <span class="nf">scheme_eval</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">rest</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nf">scheme_eval</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">env</span><span class="p">))</span>
        <span class="k">return</span> <span class="nf">scheme_apply</span><span class="p">(</span><span class="n">processer</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">env</span><span class="p">)</span>
        <span class="c1"># END PROBLEM 3
</span></pre></td></tr></tbody></table></code></div></div>

<p>为了方便观察，我在代码中添加了print方便显示递归过程，有如下测试结果：</p>

<div class="language-plaintext highlighter-rouge"><div class="code-header">
        <span data-label-text="Plaintext"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>scm&gt; (+ 2 2)
scheme_eval: (+ 2 2), env: &lt;Global Frame&gt;
scheme_eval: +, env: &lt;Global Frame&gt;
  scheme_symbolp(expr), scheme_eval: +, env: &lt;Global Frame&gt;, return value: #[+]
  expr: (+ 2 2), first: +, rest: (2 2), env: &lt;Global Frame&gt;, processer: #[+]
scheme_eval: +, env: &lt;Global Frame&gt;
  scheme_symbolp(expr), scheme_eval: +, env: &lt;Global Frame&gt;, return value: #[+]
scheme_eval: 2, env: &lt;Global Frame&gt;
  self_evaluating(expr), scheme_eval: 2, return value: 2
scheme_eval: 2, env: &lt;Global Frame&gt;
  self_evaluating(expr), scheme_eval: 2, return value: 2
args: (2 2), args.first: 2, args.rest: (2)
4
</pre></td></tr></tbody></table></code></div></div>

<h3 id="后记"><span class="me-2">后记</span><a href="#后记" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3>

<p>proj写到这里暂时写不动了，不太适应这种弱类型语言，时间全都花费在找参数类型上，这违背了编程的初衷，等后期顿悟了再回来填空吧。</p>

<h1 id="part3-sql">Part3 SQL</h1>

<h2 id="lecture-35-39-sql"><span class="me-2">Lecture 35-39 SQL</span><a href="#lecture-35-39-sql" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>SQL（Structured Query Language）是一种专门用于管理和操作关系型数据库的编程语言。</p>

<p>主要功能：</p>

<ul>
  <li><strong>数据定义（DDL）</strong>：用于创建、修改和删除数据库对象，像表、视图、索引等。</li>
  <li><strong>数据操作（DML）</strong>：负责对数据进行插入、查询、更新和删除操作。</li>
  <li><strong>数据控制（DCL）</strong>：用于管理用户权限，例如授予或撤销权限。</li>
  <li><strong>事务控制（TCL）</strong>：对事务进行管理，包括提交或回滚事务。</li>
</ul>

<p>基本语法规则：</p>

<ul>
  <li><strong>不区分大小写</strong>：一般习惯将关键字大写，而表名和列名小写。</li>
  <li><strong>语句以分号结尾</strong>：在大多数数据库系统中，SQL 语句以分号作为结束标志。</li>
  <li><strong>注释</strong>：单行注释使用<code class="language-plaintext highlighter-rouge">--</code>，多行注释使用<code class="language-plaintext highlighter-rouge">/* ... */</code>。</li>
</ul>

<h4 id="select语句"><span class="me-2">Select语句</span><a href="#select语句" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4>

<div class="language-sql highlighter-rouge"><div class="code-header">
        <span data-label-text="Sql"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre><span class="k">SELECT</span> <span class="p">[</span><span class="n">expression</span><span class="p">]</span> <span class="k">AS</span> <span class="p">[</span><span class="n">name</span><span class="p">],</span> <span class="p">...;</span>

<span class="c1">-- 简单查询</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">students</span><span class="p">;</span>

<span class="c1">-- 带条件查询</span>
<span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span> <span class="k">FROM</span> <span class="n">students</span> <span class="k">WHERE</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="p">;</span>

<span class="c1">-- 排序</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">students</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">age</span> <span class="k">DESC</span><span class="p">;</span>

<span class="c1">-- 去重</span>
<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">gender</span> <span class="k">FROM</span> <span class="n">students</span><span class="p">;</span>

<span class="c1">-- 分页</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">students</span> <span class="k">LIMIT</span> <span class="mi">10</span> <span class="k">OFFSET</span> <span class="mi">20</span><span class="p">;</span>  <span class="c1">-- MySQL语法</span>
</pre></td></tr></tbody></table></code></div></div>

<p>还有很多SQL语句，不在这里过多展示，可以进行查询获取。</p>


  </div>

  <div class="post-tail-wrapper text-muted">
    <!-- categories -->
    
      <div class="post-meta mb-3">
        <i class="far fa-folder-open fa-fw me-1"></i>
        
          <a href="/categories/coding/">Coding</a>
      </div>
    

    <!-- tags -->
    
      <div class="post-tags">
        <i class="fa fa-tags fa-fw me-1"></i>
        
          <a
            href="/tags/computer-science/"
            class="post-tag no-text-decoration"
          >computer science</a>
        
          <a
            href="/tags/algorithm/"
            class="post-tag no-text-decoration"
          >algorithm</a>
        
          <a
            href="/tags/python/"
            class="post-tag no-text-decoration"
          >python</a>
        
      </div>
    

    <div
      class="
        post-tail-bottom
        d-flex justify-content-between align-items-center mt-5 pb-2
      "
    >
      <div class="license-wrapper">
        
          

          This post is licensed under 
        <a href="https://creativecommons.org/licenses/by/4.0/">
          CC BY 4.0
        </a>
         by the author.
        
      </div>

      <!-- Post sharing snippet -->

<div class="share-wrapper d-flex align-items-center">
  <span class="share-label text-muted">Share</span>
  <span class="share-icons">
    
    
    

    

      

      <a href="https://twitter.com/intent/tweet?text=UCB%20CS61A%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%20-%20lamaper&url=%2Fposts%2FCS61A%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter">
        <i class="fa-fw fa-brands fa-square-x-twitter"></i>
      </a>
    

      

      <a href="https://www.facebook.com/sharer/sharer.php?title=UCB%20CS61A%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%20-%20lamaper&u=%2Fposts%2FCS61A%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook">
        <i class="fa-fw fab fa-facebook-square"></i>
      </a>
    

      

      <a href="https://t.me/share/url?url=%2Fposts%2FCS61A%2F&text=UCB%20CS61A%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%20-%20lamaper" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram">
        <i class="fa-fw fab fa-telegram"></i>
      </a>
    

    <button
      id="copy-link"
      aria-label="Copy link"
      class="btn small"
      data-bs-toggle="tooltip"
      data-bs-placement="top"
      title="Copy link"
      data-title-succeed="Link copied successfully!"
    >
      <i class="fa-fw fas fa-link pe-none fs-6"></i>
    </button>
  </span>
</div>

    </div>
    <!-- .post-tail-bottom -->
  </div>
  <!-- div.post-tail-wrapper -->
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->














  <section id="access-lastmod">
    <h2 class="panel-heading">Recently Updated</h2>
    <ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2">
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/CS61A/">UCB CS61A学习笔记</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/bit-ece-stm32/">BIT ECE实习之STM32开发</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/c-in-bit/">一些神奇的C语言题目</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/py-ssti/">Python SSTI研究</a>
        </li>
      
        
        
        
        <li class="text-truncate lh-lg">
          <a href="/posts/nodejs-vm-esc/">Node JS沙箱逃逸</a>
        </li>
      
    </ul>
  </section>
  <!-- #access-lastmod -->


              <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/web/">web</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ctf/">ctf</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/php/">php</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/algorithm/">algorithm</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/python/">python</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/arcgis/">arcgis</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/blogs/">blogs</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/c-c/">c/c++</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/coding/">coding</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/computer-science/">computer science</a>
      
    </div>
  </section>


            </div>

            
              
              






  <div class="toc-border-cover z-3"></div>
  <section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4">
    <h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2>
    <nav id="toc"></nav>
  </section>


            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              
              <!-- Recommend the other 3 posts according to the tags and categories of the current post. -->

<!-- The total size of related posts -->


<!-- An random integer that bigger than 0 -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy} -->















  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
    
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  











  <aside id="related-posts" aria-labelledby="related-label">
    <h3 class="mb-4" id="related-label">Further Reading</h3>
    <nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4">
      
        <article class="col">
          <a href="/posts/CS61B/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1752156840"
  data-df="ll"
  
>
  Jul 10, 2025
</time>

              <h4 class="pt-0 my-2">UCB CS61B学习笔记</h4>
              <div class="text-muted">
                <p>学习数据结构与算法</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/py-ssti/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1760590461"
  data-df="ll"
  
>
  Oct 16, 2025
</time>

              <h4 class="pt-0 my-2">Python SSTI研究</h4>
              <div class="text-muted">
                <p>对CTF中基于Python（尤其是Jinja2）的模板引擎的注入研究</p>
              </div>
            </div>
          </a>
        </article>
      
        <article class="col">
          <a href="/posts/25tong/" class="post-preview card h-100">
            <div class="card-body">
              <!--
  Date format snippet
  See: ${JS_ROOT}/utils/locale-dateime.js
-->




<time
  
  data-ts="1745164800"
  data-df="ll"
  
>
  Apr 21, 2025
</time>

              <h4 class="pt-0 my-2">2025统计建模复盘</h4>
              <div class="text-muted">
                <p>第一次统计建模尝试</p>
              </div>
            </div>
          </a>
        </article>
      
    </nav>
  </aside>
  <!-- #related-posts -->


            
              
              <!-- Navigation buttons at the bottom of the post. -->

<nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation">
  
  

  
    <a
      href="/posts/ISCC2025wp/"
      class="btn btn-outline-primary"
      aria-label="Older"
    >
      <p>ISCC2025部分 wp</p>
    </a>
  

  
    <a
      href="/posts/CS61B/"
      class="btn btn-outline-primary"
      aria-label="Newer"
    >
      <p>UCB CS61B学习笔记</p>
    </a>
  
</nav>

            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2025</time>

    
      <a href="https://github.com/lamaper">lamaper</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v7.4.1"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
    
  
    
    
    
    
      
        
        



  <section>
    <h2 class="panel-heading">Trending Tags</h2>
    <div class="d-flex flex-wrap mt-3 mb-1 me-3">
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/web/">web</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/ctf/">ctf</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/php/">php</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/algorithm/">algorithm</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/python/">python</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/arcgis/">arcgis</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/blogs/">blogs</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/c-c/">c/c++</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/coding/">coding</a>
      
        
        <a class="post-tag btn btn-outline-primary" href="/tags/computer-science/">computer science</a>
      
    </div>
  </section>


    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- Embedded scripts -->

    
      
      <!-- The comments switcher -->


    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  
  document.addEventListener('DOMContentLoaded', () => {
    SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('search-results'),
      json: '/assets/js/data/search.json',
      searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{content}</p>  </article>',
      noResultsText: '<p class="mt-5">Oops! No results found.</p>',
      templateMiddleware: function(prop, value, template) {
        if (prop === 'categories') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
          }
        }

        if (prop === 'tags') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
          }
        }
      }
    });
  });
</script>

  </body>
</html>

